/* tail.DateTime #FULL 0.5.4 @ https://github.com/pytesNET/tail.select */
(function(a){"function"==typeof define&&define.amd?define(function(){return a(window)}):("undefined"==typeof window.tail&&(window.tail={}),window.tail.select=a(window),"undefined"!=typeof jQuery&&(jQuery.fn.tailselect=function(b){var j,f=[];return this.each(function(){!1!==(j=tail.select(this,b))&&f.push(j)}),1===f.length?f[0]:0!==f.length&&f}),"undefined"!=typeof MooTools&&Element.implement({tailselect:function(b){return new tail.select(this,b)}}))})(function(a){"use strict";function b(z,A){return new RegExp("(?:^|\\s+)"+A+"(?:\\s+|$)").test(z.className||"")}function f(z,A){return new RegExp("(?:^|\\s+)"+A+"(?:\\s+|$)").test(z.className||A)||(z.className+=" "+A),z}function j(z,A,B){return(B=new RegExp("(?:^|\\s+)("+A+")(?:\\s+|$)"))&&B.test(z.className||"")&&(z.className=z.className.replace(B,"")),z}function n(z,A,B){if(CustomEvent&&CustomEvent.name)var C=new CustomEvent(A,B);else{var C=v.createEvent("CustomEvent");C.initCustomEvent(A,!!B.bubbles,!!B.cancelable,B.detail)}return z.dispatchEvent(C)}function p(z,A){if(Object.assign)return Object.assign({},z,A||{});var B={};for(var C in z)B[C]=C in A?A[C]:z[C];return B}function q(z,A){var B=v.createElement(z);return B.className=A&&A.join?A.join(" "):A||"",B}var y,v=a.document,x=function(z,A){if(z="string"==typeof z?v.querySelectorAll(z):z,z instanceof NodeList||z instanceof HTMLCollection||z instanceof Array){for(var B=[],C=z.length,D=0;D<C;D++)B.push(new x(z[D],p(A,{})));return 1===B.length?B[0]:0!==B.length&&B}if(!(z instanceof Element)||!(this instanceof x))return!!(z instanceof Element)&&new x(z,A);if(x.inst[z.getAttribute("data-tail-select")])return x.inst[z.getAttribute("data-tail-select")];if(z.getAttribute("data-select")){var E=JSON.parse(z.getAttribute("data-select").replace(/\'/g,"\""));E instanceof Object&&(A=p(A,E))}var F=z.getAttribute("placeholder")||z.getAttribute("data-placeholder"),G="bindSourceSelect",H="sourceHide";return A="object"==typeof A?A:{},A.multiple="multiple"in A?A.multiple:z.multiple,A.disabled="disabled"in A?A.disabled:z.disabled,A.placeholder=F||A.placeholder||null,A.width="auto"===A.width?z.offsetWidth+50:A.width,A.sourceBind=G in A?A[G]:A.sourceBind||!1,A.sourceHide=H in A?A[H]:A.sourceHide||!0,A.multiLimit=0<=A.multiLimit?A.multiLimit:Infinity,this.e=z,this.id=++x.count,this.con=p(x.defaults,A),this.events={},x.inst["tail-"+this.id]=this,this.init().bind()};return x.version="0.5.3",x.status="beta",x.count=0,x.inst={},x.defaults={animate:!0,classNames:null,csvOutput:!1,csvSeparator:",",descriptions:!1,deselect:!1,disabled:!1,height:350,hideDisabled:!1,hideSelected:!1,items:{},locale:"en",multiple:!1,multiLimit:Infinity,multiPinSelected:!1,multiContainer:!1,multiShowCount:!0,multiShowLimit:!1,multiSelectAll:!1,multiSelectGroup:!0,openAbove:null,placeholder:null,search:!1,searchFocus:!0,searchMarked:!0,sortItems:!1,sortGroups:!1,sourceBind:!1,sourceHide:!0,startOpen:!1,stayOpen:!1,width:null,cbComplete:void 0,cbEmpty:void 0,cbLoopItem:void 0,cbLoopGroup:void 0},x.strings={de:{all:"Alle",none:"Keine",actionAll:"Alle ausw\xE4hlen",actionNone:"Alle abw\xE4hlen",empty:"Keine Optionen verf\xFCgbar",emptySearch:"Keine Optionen gefunden",limit:"Keine weiteren Optionen w\xE4hlbar",placeholder:"W\xE4hle eine Option...",placeholderMulti:"W\xE4hle bis zu :limit Optionen...",search:"Tippen zum suchen",disabled:"Dieses Feld ist deaktiviert"},en:{all:"All",none:"None",actionAll:"Select All",actionNone:"Unselect All",empty:"No Options available",emptySearch:"No Options found",limit:"You can't select more Options",placeholder:"Select an Option...",placeholderMulti:"Select up to :limit Options...",search:"Type in to search...",disabled:"This Field is disabled"},fr:{all:"Tous",none:"Aucun",actionAll:"S\xE9lectionner tout",actionNone:"S\xE9lectionner aucun",empty:"Aucune option disponible",emptySearch:"Aucune option trouv\xE9e",limit:"Aucune autre option s\xE9lectionnable",placeholder:"Choisissez une option ...",placeholderMulti:"Choisissez jusqu'\xE0 :limit option(s) ...",search:"Rechercher ...",disabled:"Ce champs est d\xE9sactiv\xE9"},register:function(z,A){this[z]=A}},x.prototype={init:function(){var z=this,A=["tail-select"],B=this.con,C=/^[0-9.]+(?:cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|\%)$/i,D=!0===B.classNames?this.e.className:B.classNames;A.push(D&&D.push?D.join(" "):D&&D.split?D:"no-classes"),B.hideSelected&&A.push("hide-selected"),B.hideDisabled&&A.push("hide-disabled"),0==B.multiLimit&&A.push("disabled"),B.multiple&&A.push("multiple"),B.deselect&&A.push("deselect"),B.disabled&&A.push("disabled"),this.__=x.strings[B.locale]||x.strings.en,this._init=!0,this._query=!1,this.select=q("DIV",A),this.label=q("DIV","select-label"),this.dropdown=q("DIV","select-dropdown"),this.search=q("DIV","dropdown-search"),this.csvInput=q("INPUT","select-search"),B.width&&C.test(B.width)?this.select.style.width=B.width:B.width&&!isNaN(parseFloat(B.width,10))&&(this.select.style.width=B.width+"px"),this.label.addEventListener("click",function(){z.toggle.call(z,z.con.animate)}),this.select.appendChild(this.label),isNaN(parseInt(B.height,10))||(this.dropdown.style.maxHeight=parseInt(B.height,10)+"px"),B.search&&(this.search.innerHTML="<input type=\"text\" class=\"search-input\" />",this.search.children[0].placeholder=this.__.search,this.search.children[0].addEventListener("input",function(){z.query.call(z,2<this.value.length?this.value:void 0)}),this.dropdown.appendChild(this.search)),this.select.appendChild(this.dropdown),this.csvInput.type="hidden",B.csvOutput&&(this.csvInput.name=this.e.name,this.e.removeAttribute("name"),this.select.appendChild(this.csvInput)),B.multiple&&B.multiContainer&&(v.querySelector(B.multiContainer)?(this.container=v.querySelector(B.multiContainer),this.container.className+=" tail-select-container"):!0===B.multiContainer&&(this.container=this.label,this.container.className+=" tail-select-container")),this.options=new y(this.e,this);for(var E=this.e.options.length,F=0;F<E;F++)this.options.set(this.e.options[F],!1);for(var G in B.items)"string"==typeof B.items[G]&&(B.items[G]={value:B.items[G]}),this.options.add(B.items[G].key||G,B.items[G].value,B.items[G].group,B.items[G].selected,B.items[G].disabled,B.items[G].description);return this.query(),this.e.nextElementSibling?this.e.parentElement.insertBefore(this.select,this.e.nextElementSibling):this.e.parentElement.appendChild(this.select),B.sourceHide&&("none"==this.e.style.display?(this.select.style.display="none",this.e.setAttribute("data-select-hidden","display")):"hidden"==this.e.style.visibility?(this.select.style.visibiltiy="hidden",this.e.setAttribute("data-select-hidden","visibility")):(this.e.style.display="none",this.e.setAttribute("data-select-hidden","0"))),this.e.setAttribute("data-tail-select","tail-"+this.id),z.con.startOpen&&this.open(B.animate),(B.cbComplete||function(){}).call(this,this.select),(this._init=!1)?this:this},bind:function(){var z=this;return(v.addEventListener("keydown",function(A){var C,D,E,F,B=A.keyCode||A.which;if(!b(z.select,"active")||0>[13,27,38,40].indexOf(B))return!1;if(A.preventDefault(),A.stopPropagation(),13==B&&(C=z.dropdown.querySelector(".dropdown-option.hover:not(.disabled)"))&&z.options.select.call(z.options,C),27==B||13==B)return z.close(z.con.animate);if(C=z.dropdown.querySelector(".dropdown-option.hover:not(.disabled)")){j(C,"hover"),E=[(40==B?"next":"previous")+"ElementSibling"];do{if(C=null!==(F=C[E])&&"LI"==C.tagName?F:null!==(F=C.parentElement[E])&&0<F.children.length&&"UL"==F.tagName&&F.children[40==B?0:F.children.length-1],C&&(!b(C,"dropdown-option")||b(C,"disabled")))continue;break}while(!0)}if(C||40!=B?!C&&38==B&&(C=z.dropdown.querySelector("ul:last-child li:not(.disabled):last-child")):C=z.dropdown.querySelector(".dropdown-option:not(.disabled)"),C&&(D=z.dropdown.querySelector(".dropdown-inner"))){var G=function(H){for(var I={top:H.offsetTop,height:H.offsetHeight};(H=H.parentElement)!=D;)I.top+=H.offsetTop;return I}(C);f(C,"hover"),G.top+2*G.height>D.offsetHeight+D.scrollTop?D.scrollBy(0,G.top+2*G.height-(D.offsetHeight+D.scrollTop)):G.top-G.height<D.scrollTop&&D.scrollBy(0,-Math.abs(D.scrollTop-G.top+G.height))}return!0}),v.addEventListener("click",function(A){if(!b(z.select,"active")||b(z.select,"idle"))return!1;if(!0===z.con.stayOpen)return!1;for(var B=[z.e,z.select,z.container],C=B.length,D=0;D<C;D++){if(B[D]&&(B[D].contains(A.target)||B[D]==A.target))return!1;if(!A.target.parentElement)return!1}return z.close.call(z,z.con.animate)}),!!!this.con.sourceBind)||(this.e.addEventListener("change",function(A){if(void 0!=A.detail)return!1;if(A.preventDefault(),A.stopPropagation(),!this.multiple&&this.selectedIndex)z.options.select.call(z.options,this.options[this.selectedIndex]);else{var B=[].concat(z.options.selected),C=[].filter.call(this.querySelectorAll("option:checked"),function(D){return!(0<=B.indexOf(D))||(B.splice(B.indexOf(D),1),!1)});z.options.walk.call(z.options,"unselect",B),z.options.walk.call(z.options,"select",C)}}),!0)},callback:function(z,A,B){var C=this,D="[data-key='"+z.key+"'][data-group='"+z.group+"']";if("rebuild"==A)return this.query();var E=this.dropdown.querySelector(D);return E&&0<=["select","disable"].indexOf(A)?f(E,"select"==A?"selected":"disabled"):E&&0<=["unselect","enable"].indexOf(A)&&j(E,"unselect"==A?"selected":"disabled"),this.update(z),!0===B||this.trigger("change",z,A)},trigger:function(z){if(this._init)return!1;var A={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};"change"==z&&arguments[2]&&0<=arguments[2].indexOf("select")&&(n(this.e,"input",A),n(this.e,"change",A)),n(this.select,"tail::"+z,A);var C,B=[];return Array.prototype.map.call(arguments,function(D,E){0<E&&B.push(D)}),(this.events[z]||[]).forEach(function(D){C=[].concat(B),C.push(D.args||null),(D.cb||function(){}).apply(A.detail.self,C)}),!0},calc:function(){var z=this.dropdown.cloneNode(!0),A=this.con.height,B=0,C=this.dropdown.querySelector(".dropdown-inner");z=this.dropdown.cloneNode(!0),z.style.cssText="height:auto;opacity:0;display:block;visibility:hidden;",z.style.maxHeight=this.con.height+"px",z.className+=" cloned",this.dropdown.parentElement.appendChild(z),A=A>z.clientHeight?z.clientHeight:A,this.con.search&&(B=z.querySelector(".dropdown-search").clientHeight),this.dropdown.parentElement.removeChild(z);var D=this.select.getBoundingClientRect(),E=a.innerHeight-(D.top+D.height),F=!!(A+B>E)&&D.top>E;return!0===this.con.openAbove||!1!==this.con.openAbove&&F?(F=!0,A=Math.min(A,D.top-10),f(this.select,"open-top")):(F=!1,A=Math.min(A,E-10),j(this.select,"open-top")),C&&(this.dropdown.style.maxHeight=A+"px",C.style.maxHeight=A-B-2+"px"),this},query:function(z,A){var D,E,F,G,H,I,B=q("DIV","dropdown-inner"),C=this,J=z?"finder":"walker",K=this.con,L="getAttribute",M=z?[z,A]:[K.sortItems,K.sortGroups];for(this._query="string"==typeof z&&z;D=this.options[J].apply(this.options,M);){if(!F||F&&F[L]("data-group")!==D.group)if(E=(K.cbLoopGroup||this.cbGroup).call(this,D.group,z,B),E instanceof Element)F=E,F.setAttribute("data-group",D.group),B.appendChild(F);else break;if(null!==(G=(K.cbLoopItem||this.cbItem).call(this,D,F,z,B))){if(!1===G)break;G.setAttribute("data-key",D.key),G.setAttribute("data-group",D.group),G.addEventListener("click",function(){if(!this.hasAttribute("data-key"))return!1;var Q=this[L]("data-key"),R=this[L]("data-group")||"#";C.options.toggle.call(C.options,Q,R)&&!1===C.con.stayOpen&&!C.con.multiple&&C.close.call(C,C.con.animate)}),F.appendChild(G)}}var N=B.querySelectorAll("*[data-key]").length;0==N&&(this.con.cbEmpty||function(P){var Q=q("SPAN","dropdown-empty");Q.innerText=this.__.empty,P.appendChild(Q)}).call(this,B,z),0<N&&K.multiple&&K.multiLimit==Infinity&&K.multiSelectAll&&(H=q("BUTTON","tail-all"),I=q("BUTTON","tail-none"),H.innerText=this.__.actionAll,H.addEventListener("click",function(P){P.preventDefault();var Q=C.dropdown.querySelectorAll(".dropdown-inner .dropdown-option");C.options.walk.call(C.options,"select",Q)}),I.innerText=this.__.actionNone,I.addEventListener("click",function(P){P.preventDefault();var Q=C.dropdown.querySelectorAll(".dropdown-inner .dropdown-option");C.options.walk.call(C.options,"unselect",Q)}),G=q("SPAN","dropdown-action"),G.appendChild(H),G.appendChild(I),B.insertBefore(G,B.children[0]));var O=this.dropdown.querySelector(".dropdown-inner");return this.dropdown[(O?"replace":"append")+"Child"](B,O),this.calc().updateCSV().updateLabel()},cbGroup:function(z){var D,E,B=q("UL","dropdown-optgroup"),C=this;return"#"==z?B:(B.innerHTML="<li class=\"optgroup-title\"><b>"+z+"</b></li>",this.con.multiple&&this.con.multiLimit==Infinity&&this.con.multiSelectAll&&(D=q("BUTTON","tail-none"),E=q("BUTTON","tail-all"),D.innerText=this.__.none,D.addEventListener("click",function(F){F.preventDefault();var G=this.parentElement.parentElement.getAttribute("data-group");C.options.all.call(C.options,"unselect",G)}),E.innerText=this.__.all,E.addEventListener("click",function(F){F.preventDefault();var G=this.parentElement.parentElement.getAttribute("data-group");C.options.all.call(C.options,"select",G)}),B.children[0].appendChild(D),B.children[0].appendChild(E)),B)},cbItem:function(z,A,B){var C=q("LI","dropdown-option"+(z.selected?" selected":"")+(z.disabled?" disabled":""));return B&&0<B.length&&this.con.searchMarked?C.innerHTML=z.value.replace(new RegExp("("+B+")","i"),"<mark>$1</mark>"):C.innerText=z.value,this.con.descriptions&&z.description&&(C.innerHTML+="<span class=\"option-description\">"+z.description+"</span>"),C},update:function(z){return this.updateLabel().updateContainer(z).updatePin(z).updateCSV(z)},updateLabel:function(z){if(this.container==this.label&&0<this.options.selected.length)return this.label.querySelector(".label-inner")&&this.label.removeChild(this.label.querySelector(".label-inner")),this.label.querySelector(".label-count")&&this.label.removeChild(this.label.querySelector(".label-count")),this;var C,A=this.con,B=this.options.selected.length;return"string"!=typeof z&&(A.disabled?z="disabled":0==this.dropdown.querySelectorAll("*[data-key]").length?z="empty"+(b(this.select,"in-search")?"Search":""):A.multiLimit<=B?z="limit":!A.multiple&&0<this.options.selected.length?z=this.options.selected[0].innerText:"string"==typeof A.placeholder?z=A.placeholder:z="placeholder"+(A.multiple&&A.multiLimit<Infinity?"Multi":"")),z=(this.__[z]||z).replace(":limit",A.multiLimit),z="<span class=\"label-inner\">"+z+"</span>",C=A.multiShowLimit&&A.multiLimit<Infinity,A.multiple&&A.multiShowCount&&(z="<span class=\"label-count\">:c</span>"+z,z=z.replace(":c",B+(C?" / "+A.multiLimit:""))),this.label.innerHTML=z,this},updateContainer:function(z){if(!this.container||!this.con.multiContainer)return this;var A="[data-group='"+z.group+"'][data-key='"+z.key+"']";if(this.container.querySelector(A))return z.selected||this.container.removeChild(this.container.querySelector(A)),this;if(z.selected){var B=this,C=q("DIV","select-handle");C.innerText=z.value,C.setAttribute("data-key",z.key),C.setAttribute("data-group",z.group),C.addEventListener("click",function(D){D.preventDefault(),D.stopPropagation();var E=this.getAttribute("data-key"),F=this.getAttribute("data-group");B.options.unselect.call(B.options,E,F)}),this.container.appendChild(C)}return this},updatePin:function(z){var A=this.dropdown.querySelector(".dropdown-inner ul"),B="li[data-key='"+z.key+"'][data-group='"+z.group+"']";if(!this.con.multiPinSelected||!A||!1!==this._query)return this;if(B=this.dropdown.querySelector(B),z.selected)A.insertBefore(B,A.children[0]);else{for(var C=this.dropdown.querySelector("ul[data-group='"+z.group+"']"),D=this.options[z.index-1],E=!1;D&&D.group==z.group&&!(E=C.querySelector("li[data-key='"+D.key+"']"));)D=this.options[D.index-1];E&&E.nextElementSibling?C.insertBefore(B,E.nextElementSibling):C.appendChild(B)}return this},updateCSV:function(){if(!this.csvInput||!this.con.csvOutput)return this;for(var A=[],B=this.options.selected.length,C=0;C<B;C++)A.push(this.options.selected[C].value);return this.csvInput.value=A.join(this.con.csvSeparator||","),this},open:function(z){if(b(this.select,"active")||b(this.select,"idle")||this.con.disabled)return!1;this.calc();var A=function(){f(j(B.select,"idle"),"active"),this.dropdown.style.height="auto",this.dropdown.style.overflow="visible",this.label.removeAttribute("style"),this.con.search&&this.con.searchFocus&&this.dropdown.querySelector("input").focus(),this.trigger.call(this,"open")},B=this,C=this.dropdown.style;return!1===z?(C.cssText="height:"+C.maxHeight+";display:block;overflow:hidden;",A.call(this)):(this.label.style.zIndex=25,this.dropdown.style.cssText+="height:0;display:block;overflow:hidden;",f(B.select,"idle"),function D(){var E=parseInt(C.height,10),F=parseInt(C.maxHeight,10);return E>=F?A.call(B):void(C.height=(E+50>F?F:E+50)+"px",setTimeout(D,20))}()),this},close:function(z){if(!b(this.select,"active")||b(this.select,"idle"))return!1;var A=function(){j(j(this.select,"idle"),"active"),this.dropdown.removeAttribute("style"),this.dropdown.querySelector(".dropdown-inner").removeAttribute("style"),this.trigger.call(this,"close")},B=this,C=this.dropdown;return!1===z?A.call(this):(f(this.select,"idle"),this.dropdown.style.overflow="hidden",function D(){return 0>=parseInt(C.offsetHeight,10)-50?A.call(B):void(C.style.height=parseInt(C.offsetHeight,10)-50+"px",setTimeout(D,20))}()),this},toggle:function(z){return b(this.select,"active")?this.close(z):b(this.select,"idle")?this:this.open(z)},remove:function(){if(this.e.removeAttribute("data-tail-select"),this.e.hasAttribute("data-select-hidden")&&("0"==this.e.getAttribute("data-select-hidden")&&this.e.style.removeProperty("display"),this.e.removeAttribute("data-select-hidden")),Array.prototype.map.call(this.e.querySelectorAll("[data-select-option='add']"),function(C){C.parentElement.removeChild(C)}),Array.prototype.map.call(this.e.querySelectorAll("[data-select-optgroup='add']"),function(C){C.parentElement.removeChild(C)}),this.e.name=this.csvInput.hasAttribute("name")?this.csvInput.name:this.e.name,this.select.parentElement&&this.select.parentElement.removeChild(this.select),this.container)for(var z=this.container.querySelectorAll(".select-handle"),A=z.length,B=0;B<A;B++)this.container.removeChild(z[B]);return this},reload:function(){return this.remove().init()},config:function(z,A){if(z instanceof Object){for(var C in z)this.config(C,z[C],!1);return this.reload()?this.con:this.con}return"undefined"==typeof z?this.con:!!(z in this.con)&&("undefined"==typeof A?this.con[z]:(this.con[z]=A,!1!==this.rebuild&&this.reload(),this))},enable:function(z){return j(this.select,"disabled"),this.e.disabled=!1,this.con.disabled=!1,!1===z?this:this.reload()},disable:function(z){return f(this.select,"disabled"),this.e.disabled=!0,this.con.disabled=!0,!1===z?this:this.reload()},on:function(z,A,B){return 0>["open","close","change"].indexOf(z)||"function"!=typeof A?!1:(z in this.events||(this.events[z]=[]),this.events[z].push({cb:A,args:B instanceof Array?B:[]}),this)}},y=x.options=function(z,A){return this instanceof y?(this.self=A,this.element=z,this.length=0,this.selected=[],this.disabled=[],this.items={"#":{}},this.groups={},this):new y(z,A)},y.prototype={_r:function(z){return z.replace("disabled","disable").replace("enabled","enable").replace("selected","select").replace("unselected","unselect")},get:function(z,A){var B="getAttribute";if("object"==typeof z&&z.key&&z.group)A=z.group||A,z=z.key;else if(z instanceof Element)"OPTION"==z.tagName?(A=z.parentElement.label||"#",z=z.value||z.innerText):z.hasAttribute("data-key")&&(A=z[B]("data-group")||z.parentElement[B]("data-group")||"#",z=z[B]("data-key"));else{if("number"==typeof z)return this.get(this[z]);if("string"!=typeof z)return!1}return!!(A in this.items)&&this.items[A][z]},set:function(z,A){var B=z.value||z.innerText,C=z.parentElement.label||"#";if(C in this.items||(this.items[C]={},this.groups[C]=z.parentElement),B in this.items[C])return!1;var D=this.self.con,E=!D.multiple&&0<this.selected.length;if((E||D.multiple&&this.selected.length>=D.multiLimit)&&(z.selected=!1),z.selected&&D.deselect&&(!z.hasAttribute("selected")||0==D.multiLimit)&&(z.selected=!1,z.parentElement.selectedIndex=-1),z.hasAttribute("data-description")){var F=q("SPAN");F.innerHTML=z.getAttribute("data-description"),z.setAttribute("data-description",F.innerHTML)}return this[this.length++]=this.items[C][B]={key:B,value:z.text,index:this.length-1,description:z.getAttribute("data-description")||null,group:C,option:z,optgroup:"#"==C?void 0:this.groups[C],selected:z.selected,disabled:z.disabled},z.selected&&this.select(this.items[C][B]),z.disabled&&this.disable(this.items[C][B]),!A||this.self.callback(this[this.length-1],"rebuild")},add:function(z,A,B,C,D,E,F){if(z instanceof Object){for(var G in z)this.add(z[G].key||G,z[G].value,z[G].group,z[G].selected,z[G].disabled,z[G].description,!1);return this.self.query()}if(this.get(z,B))return!1;if(B="string"==typeof B?B:"#","#"!==B&&!(B in this.groups)){var H=q("OPTGROUP");H.label=B,H.setAttribute("data-select-optgroup","add"),this.element.appendChild(H),this.items[B]={},this.groups[B]=H}var I=this.self.con,J=!I.multiple&&0<this.selected.length;(J||I.multiple&&this.selected.length>=I.multiLimit)&&(C=!1),D=!!D;var K=v.createElement("OPTION");return K.value=z,K.selected=C,K.disabled=D,K.innerText=A,K.setAttribute("data-select-option","add"),E&&0<E.length&&K.setAttribute("data-description",E),("#"==B?this.element:this.groups[B]).appendChild(K),this.set(K,F)},move:function(z,A,B,C){if(!(z=this.get(z,A)))return!1;if("#"!==B&&!(B in this.groups)){var D=q("OPTGROUP");D.label=B,this.element.appendChild(D),this.items[B]={},this.groups[B]=D,this.groups[B].appendChild(z.option)}return delete this.items[z.group][z.key],z.group=B,z.optgroup=this.groups[B]||void 0,this.items[B][z.key]=z,!C||this.self.query()},remove:function(z,A,B){return!!(z=this.get(z,A))&&(z.selected&&this.unselect(z),z.disabled&&this.enable(z),z.option.parentElement.removeChild(z.option),Array.prototype.splice.call(this,z.index,1),delete this.items[z.group][z.key],0===Object.keys(this.items[z.group]).length&&(delete this.items[z.group],delete this.groups[z.group]),!B||this.self.query())},is:function(z,A,B){var z=this._r(z),C=this.get(A,B);return!C||0>["select","unselect","disable","enable"].indexOf(z)?null:"disable"==z||"enable"==z?"disable"==z?C.disabled:!C.disabled:("select"==z||"unselect"==z)&&("select"==z?C.selected:!C.selected)},handle:function(z,A,B,C){var D=this.get(A,B),z=this._r(z);if(!D||0>["select","unselect","disable","enable"].indexOf(z))return null;if("disable"==z||"enable"==z)return D.option in this.disabled||"disable"!=z?D.option in this.disabled&&"enable"==z&&this.disabled.splice(this.disabled.indexOf(D.option),1):this.disabled.push(D.option),D.disabled="disable"==z,D.option.disabled="disable"==z,this.self.callback.call(this.self,D,z);var E=b(this.self.select,"disabled")||D.disabled||D.option.disabled,F=this.self.con.multiple&&this.self.con.multiLimit<=this.selected.length,G=!this.self.con.multiple&&0<this.selected.indexOf(D.option),H=0==this.self.con.multiLimit&&!0==this.self.con.deselect,I=!this.self.con.multiple&&!this.self.con.deselect&&!0!==C;if("select"==z){if(E||F||H||G)return!1;if(!this.self.con.multiple)for(var J in this.selected)this.unselect(this.selected[J],void 0,!0);0>this.selected.indexOf(D.option)&&this.selected.push(D.option)}else if("unselect"==z){if(E||I)return!1;this.selected.splice(this.selected.indexOf(D.option),1)}return D.selected="select"==z,D.option.selected="select"==z,D.option[(6<z.length?"remove":"set")+"Attribute"]("selected","selected"),this.self.callback.call(this.self,D,z,C)},enable:function(z,A){return this.handle("enable",z,A,!1)},disable:function(z,A){return this.handle("disable",z,A,!1)},select:function(z,A){return this.handle("select",z,A,!1)},unselect:function(z,A,B){return this.handle("unselect",z,A,B)},toggle:function(z,A){return!!(z=this.get(z,A))&&this.handle(z.selected?"unselect":"select",z,A,!1)},invert:function(z){if(z=this._replaceType(z),0<=["enable","disable"].indexOf(z))var A=this.disabled,B="enable"==z?"disable":"enable";else if(0<=["select","unselect"].indexOf(z))var A=this.selected,B="select"==z?"unselect":"select";var C=Array.prototype.filter.call(this,function(E){return!(E in A)}),D=this;return[].concat(A).forEach(function(E){D.handle.call(D,B,E)}),[].concat(C).forEach(function(E){D.handle.call(D,z,E)}),!0},all:function(z,A){var B=this,C=this;return A in this.items?C=Object.keys(this.items[A]):0<=["unselect","enable"].indexOf(z)&&(C=[].concat("unselect"==z?this.selected:this.disabled)),Array.prototype.forEach.call(C,function(D){B.handle.call(B,z,D,A,!1)}),!0},walk:function(z,A,B){if(A instanceof Array)for(var C=A.length,D=0;D<C;D++)this.handle.apply(this,[z,A[D],null].concat(B));else if(A instanceof Object)for(var E in A)this.handle.apply(this,[z,A[E],null].concat(B));return this},finder:function(z,A){if("undefined"==typeof this._findLoop)if(z=z.replace(/[\[\]{}()*+?.,^$\\|#-]/g,"\\$&"),"any"==A){var B="<option((\\s+[a-z0-9_-]+(\\s*=\\s*(\\\".*?"+z+".*?\\\"|'.*?"+z+".*?'))?)>.+?";B+="|(\\s+\\w+(-?\\w*)*(\\s*=\\s*(?:\\\".*?\\\"|'.*?'))?)+>[^<]*("+z+")[^<]*)<\\/option>"}else var B="<option(\\s+\\w+(-?\\w*)*(\\s*=\\s*(?:\\\".*?\\\"|'.*?'))?)*>[^<]*("+z+")[^<]*<\\/option>";"undefined"==typeof this._findLoop&&(this._findLoop=!0,this._findRegex=new RegExp(B,"gmi"));for(var D,E,F,C=this.self.e.innerHTML;null!==(D=this._findRegex.exec(C));)if(F=(C.substr(0,this._findRegex.lastIndex).match(/\<\/option\>/g)||[]).length,E=this.get(this.self.e.options[F-1]),null!==E)return E;return delete this._findLoop,delete this._findRegex,!1},find:function(z,A){for(var B=[];!1!==(item=this.finder(z,A));)B.push(item);return B},walker:function(z,A){if("undefined"!=typeof this._inLoop&&this._inLoop){if(0<this._inItems.length){var B=this._inItems.shift();return this.items[this._inGroup][B]}if(0<this._inGroups.length){for(;0<this._inGroups.length;){var C=this._inGroups.shift(),D=Object.keys(this.items[C]);if(0<D.length)break}return"ASC"==z?D.sort():"DESC"==z?D.sort().reverse():"function"==typeof z&&(D=z.call(this,D)),this._inItems=D,this._inGroup=C,this.walker(null,null)}return delete this._inLoop,delete this._inItems,delete this._inGroup,delete this._inGroups,!1}var E=Object.keys(this.groups);return"ASC"==A?E.sort():"DESC"==A?E.sort().reverse():"function"==typeof A&&(E=A.call(this,E)),E.unshift("#"),this._inLoop=!0,this._inItems=[],this._inGroups=E,this.walker(z,null)}},x});
