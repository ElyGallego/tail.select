/* tail.DateTime #ES6 0.5.1 @ https://github.com/pytesNET/tail.select */
var{select,options}=function(f){function g(B,C){let D=n.createElement(B);return D.className=C&&C.join?C.join(" "):C||"",D}let n=f.document;const o="querySelector",p="querySelectorAll",q="parentElement",t="hasAttribute",u="getAttribute",x="setAttribute",y="removeAttribute";let A,z=function(B,C){if(B="string"==typeof B?n[p](B):B,B instanceof NodeList||B instanceof HTMLCollection||B instanceof Array)return Array.prototype.map.call(B,G=>{return new z(G,Object.assign({},C))});if(!(B instanceof Element)||!(this instanceof z))return!!(B instanceof Element)&&new z(B,C);if(z.inst[B[u]("data-tail-select")])return z.inst[B[u]("data-tail-select")];if(B[u]("data-select")){let G=JSON.parse(B[u]("data-select").replace(/\'/g,"\""));C=G instanceof Object?Object.assign(C,G):C}let D=B[u]("placeholder")||B[u]("data-placeholder"),E="bindSourceSelect",F="sourceHide";return C="object"==typeof C?C:{},C.multiple="multiple"in C?C.multiple:B.multiple,C.disabled="disabled"in C?C.disabled:B.disabled,C.placeholder=D||C.placeholder||null,C.width="auto"===C.width?B.offsetWidth+50:C.width,C.sourceBind=E in C?C[E]:C.sourceBind||!1,C.sourceHide=F in C?C[F]:C.sourceHide||!0,C.multiLimit=0<=C.multiLimit?C.multiLimit:Infinity,this.e=B,this.id=++z.count,this.con=Object.assign({},z.defaults,C),this.events={},z.inst["tail-"+this.id]=this,this.init().bind()};return z.version="0.5.1",z.status="dev",z.count=0,z.inst={},z.defaults={animate:!0,classNames:null,csvOutput:!1,csvSeparator:",",descriptions:!1,deselect:!1,disabled:!1,height:350,hideDisabled:!1,hideSelected:!1,items:{},locale:"en",multiple:!1,multiLimit:Infinity,multiPinSelected:!1,multiContainer:!1,multiShowCount:!0,multiShowLimit:!1,multiSelectAll:!1,multiSelectGroup:!0,openAbove:null,placeholder:null,search:!1,searchFocus:!0,searchMarked:!0,sortItems:!1,sortGroups:!1,sourceBind:!1,sourceHide:!0,startOpen:!1,stayOpen:!1,width:null,cbComplete:void 0,cbEmpty:void 0,cbLoopItem:void 0,cbLoopGroup:void 0},z.strings={de:{all:"Alle",none:"Keine",actionAll:"Alle ausw\xE4hlen",actionNone:"Alle abw\xE4hlen",empty:"Keine Optionen verf\xFCgbar",emptySearch:"Keine Optionen gefunden",limit:"Keine weiteren Optionen w\xE4hlbar",placeholder:"W\xE4hle eine Option...",placeholderMulti:"W\xE4hle bis zu :limit Optionen...",search:"Tippen zum suchen",disabled:"Dieses Feld ist deaktiviert"},en:{all:"All",none:"None",actionAll:"Select All",actionNone:"Unselect All",empty:"No Options available",emptySearch:"No Options found",limit:"You can't select more Options",placeholder:"Select an Option...",placeholderMulti:"Select up to :limit Options...",search:"Type in to search...",disabled:"This Field is disabled"},fr:{all:"Tous",none:"Aucun",actionAll:"S\xE9lectionner tout",actionNone:"S\xE9lectionner aucun",empty:"Aucune option disponible",emptySearch:"Aucune option trouv\xE9e",limit:"Aucune autre option s\xE9lectionnable",placeholder:"Choisissez une option ...",placeholderMulti:"Choisissez jusqu'\xE0 :limit option(s) ...",search:"Rechercher ...",disabled:"Ce champs est d\xE9sactiv\xE9"},register(B,C){this[B]=C}},z.prototype={init(){let B=["tail-select"],C=this.con,D=/^[0-9.]+(?:cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|\%)$/i;return this.__=z.strings[C.locale]||z.strings.en,this._pos=0,this._init=!0,B=B.concat(!0===C.classNames?this.e.className:C.classNames),C.hideSelected&&B.push("hide-selected"),C.hideDisabled&&B.push("hide-disabled"),0==C.multiLimit&&B.push("disabled"),C.multiple&&B.push("multiple"),C.deselect&&B.push("deselect"),C.disabled&&B.push("disabled"),this.select=g("DIV",B),C.width&&D.test(C.width)?this.select.style.width=C.width:C.width&&!isNaN(parseFloat(C.width,10))&&(this.select.style.width=C.width+"px"),this.label=g("DIV","select-label"),this.label.addEventListener("click",()=>{this.toggle()}),this.select.appendChild(this.label),this.dropdown=g("DIV","select-dropdown"),isNaN(parseInt(C.height,10))||(this.dropdown.style.maxHeight=parseInt(C.height,10)+"px"),C.search&&(this.search=g("DIV","dropdown-search"),this.search.innerHTML=`<input type="text" class="search-input" placeholder="${this.__.search}" />`,this.search.children[0].addEventListener("input",E=>{this.query(2<E.target.value.length?E.target.value:void 0)}),this.dropdown.appendChild(this.search)),this.select.appendChild(this.dropdown),this.csvInput=g("INPUT","select-search"),this.csvInput.type="hidden",C.csvOutput&&(this.csvInput.name=this.e.name,this.e[y]("name"),this.select.appendChild(this.csvInput)),C.multiple&&C.multiContainer&&(n[o](C.multiContainer)?(this.container=n[o](C.multiContainer),this.container.classList.add("tail-select-container")):!0===C.multiContainer&&(this.container=this.label,this.container.classList.add("tail-select-container"))),this.options=new A(this.e,this),Array.prototype.map.call(this.e.options,E=>{this.options.set(E,!1)}),Object.keys(C.items).forEach(E=>{let F=C.items[E].join?C.items[E]:{value:C.items[E]},{value:G,group:H,selected:I,disabled:J,description:K}=F;this.options.add(E,G,H,I,J,K)}),this.query(),this.e.nextElementSibling?this.e[q].insertBefore(this.select,this.e.nextElementSibling):this.e[q].appendChild(this.select),C.sourceHide&&("none"==this.e.style.display?(this.select.style.display="none",this.e.setAttribute("data-select-hidden","display")):"hidden"==this.e.style.visibility?(this.select.style.visibiltiy="hidden",this.e.setAttribute("data-select-hidden","visibility")):(this.e.style.display="none",this.e.setAttribute("data-select-hidden","0"))),this._init=!1,this.e[x]("data-tail-select","tail-"+this.id),(C.cbComplete||function(){}).call(this,this.select),C.startOpen?this.open(this.con.animate):this},bind(){return(n.addEventListener("keydown",B=>{let D,E,F,G,C=B.keyCode||B.which;if(!this.select.classList.contains("active")||0>[13,27,38,40].indexOf(C))return!1;if(B.preventDefault(),B.stopPropagation(),13==C&&(D=this.dropdown[o](".dropdown-option.hover:not(.disabled)"))&&this.options.select(D),27==C||13==C)return this.close(this.con.animate);if(D=this.dropdown[o](".dropdown-option.hover:not(.disabled)")){D.classList.remove("hover"),F=[(40==C?"next":"previous")+"ElementSibling"];do{if(D=null!==(G=D[F])&&"LI"==D.tagName?G:null!==(G=D[q][F])&&0<G.children.length&&"UL"==G.tagName&&G.children[40==C?0:G.children.length-1],D&&(!/dropdown-option/.test(D.className)||/disabled/.test(D.className)))continue;break}while(!0)}if(D||40!=C?!D&&38==C&&(D=this.dropdown[o]("ul:last-child li:not(.disabled):last-child")):D=this.dropdown[o](".dropdown-option:not(.disabled)"),D&&(E=this.dropdown[o](".dropdown-inner"))){let H=function(I){let J={top:I.offsetTop,height:I.offsetHeight};for(;(I=I[q])!=E;)J.top+=I.offsetTop;return J}(D);D.classList.add("hover"),H.top+2*H.height>E.offsetHeight+E.scrollTop?E.scrollBy(0,H.top+2*H.height-(E.offsetHeight+E.scrollTop)):H.top-H.height<E.scrollTop&&E.scrollBy(0,-Math.abs(E.scrollTop-H.top+H.height))}return!0}),n.addEventListener("click",B=>{let C=!this.select.classList.contains("active")||this.select.classList.contains("idle");if(C||this.con.stayOpen)return!1;let D=[this.e,this.select,this.container].filter(E=>{return E&&(E.contains(B.target)||E==B.target)});return 0==D.length&&this.close(this.con.animate)}),!!!this.con.sourceBind)||(this.e.addEventListener("change",B=>{B.preventDefault(),B.stopPropagation(),!this.multiple&&this.e.selectedIndex?this.options.select(this.e.options[this.selectedIndex]):this.e.selectedOptions?(this.options.all("unselect"),Array.from(this.e.selectedOptions,C=>{this.options.select(C)})):(this.options.all("unselect"),Array.from(this.e[p]("option:checked"),C=>{this.options.select(C)}))}),!0)},callback(B,C,D){let E=this,F=`[data-key='${B.key}'][data-group='${B.group}']`;if("rebuild"==C)return this.query();let G=this.dropdown[o](F);return G&&0<=["select","disable"].indexOf(C)?G.classList.add("select"==C?"selected":"disabled"):G&&0<=["unselect","enable"].indexOf(C)&&G.classList.remove("unselect"==C?"selected":"disabled"),this.update(B),!!D||this.trigger("change",B,C)},trigger(B){if(this._init)return!1;let C={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};"change"==B&&arguments[2]&&0<arguments[2].indexOf("select")&&(this.e.dispatchEvent(new CustomEvent("input",C)),this.e.dispatchEvent(new CustomEvent("change",C))),this.select.dispatchEvent(new CustomEvent("tail::"+B,C));let E,D=[...arguments];return D.shift(),(this.events[B]||[]).forEach(F=>{E=[].concat(D),E.push(F.args||null),(F.cb||function(){}).apply(this,E)}),!0},calc(){let B=this.dropdown.cloneNode(!0),C=this.con.height,D=0,E=this.dropdown[o](".dropdown-inner");B=this.dropdown.cloneNode(!0),B.style.cssText="height:auto;opacity:0;display:block;visibility:hidden;",B.style.maxHeight=this.con.height+"px",B.className+=" cloned",this.dropdown[q].appendChild(B),C=C>B.clientHeight?B.clientHeight:C,this.con.search&&(D=B[o](".dropdown-search").clientHeight),this.dropdown[q].removeChild(B);let F=this.select.getBoundingClientRect(),G=f.innerHeight-(F.top+F.height),H=!!(C+D>G)&&F.top>G;return!0===this.con.openAbove||!1!==this.con.openAbove&&H?(H=!0,C=Math.min(C,F.top-10),this.select.classList.add("open-top")):(H=!1,C=Math.min(C,G-10),this.select.classList.remove("open-top")),E&&(this.dropdown.style.maxHeight=C+"px",E.style.maxHeight=C-D-2+"px"),this},query(B,C){let E,F,G,H,D=g("DIV","dropdown-inner"),I=B?"finder":"walker",J=this.con,K=B?[B,C]:[J.sortItems,J.sortGroups];for(let N of this.options[I].apply(this.options,K)){if(!F||F&&F[u]("data-group")!==N.group)if(E=(J.cbLoopGroup||this.cbGroup).call(this,N.group,B,D),E instanceof Element)F=E,F[x]("data-group",N.group),D.appendChild(F);else break;let O=(J.cbLoopItem||this.cbItem).call(this,N,F,B,D);if(null!==O){if(!1===O)break;O[x]("data-key",N.key),O[x]("data-group",N.group),O.addEventListener("click",()=>{return!!O[u]("data-key")&&void(this.options.toggle(O[u]("data-key"),O[u]("data-group"))&&!J.stayOpen&&!J.multiple&&this.close(this.con.animate))}),F.appendChild(O)}}let L=D[p]("*[data-key]").length;if(0==L&&(this.con.cbEmpty||function(N){let O=g("SPAN","dropdown-empty");O.innerText=this.__.empty,N.appendChild(O)}).call(this,D,B),0<L&&J.multiple&&J.multiLimit==Infinity&&J.multiSelectAll){G=g("BUTTON","tail-all"),H=g("BUTTON","tail-none"),G.innerText=this.__.actionAll,G.addEventListener("click",O=>{O.preventDefault(),this.options.all("select")}),H.innerText=this.__.actionNone,H.addEventListener("click",O=>{O.preventDefault(),this.options.all("unselect")});let N=g("SPAN","dropdown-action");N.appendChild(G),N.appendChild(H),D.insertBefore(N,D.children[0])}let M=this.dropdown[o](".dropdown-inner");return this.dropdown[(M?"replace":"append")+"Child"](D,M),this.calc().updateCSV().updateLabel()},cbGroup(B){let F,G,D=g("UL","dropdown-optgroup"),E=this;return"#"==B?D:(D.innerHTML=`<li class="optgroup-title"><b>${B}</b></li>`,this.con.multiple&&this.con.multiLimit==Infinity&&this.con.multiSelectAll&&(F=g("BUTTON","tail-none"),G=g("BUTTON","tail-all"),F.innerText=this.__.none,F.addEventListener("click",H=>{H.preventDefault(),this.options.all("unselect",H.target[q][q][u]("data-group"))}),G.innerText=this.__.all,G.addEventListener("click",H=>{H.preventDefault(),this.options.all("select",H.target[q][q][u]("data-group"))}),D.children[0].appendChild(F),D.children[0].appendChild(G)),D)},cbItem(B,C,D){let{value:E,selected:F,disabled:G}=B,H=g("LI","dropdown-option"+(F?" selected":"")+(G?" disabled":""));return D&&0<D.length&&this.con.searchMarked?H.innerHTML=E.replace(new RegExp("("+D+")","i"),"<mark>$1</mark>"):H.innerText=E,this.con.descriptions&&B.description&&(H.innerHTML+=`<span class="option-description">${B.description}</span>`),H},update(B){return this.updateLabel().updateContainer(B).updatePin(B).updateCSV(B)},updateLabel(B){if(this.container==this.label&&0<this.options.selected.length)return this.label[o](".label-inner")&&this.label.removeChild(this.label[o](".label-inner")),this.label[o](".label-count")&&this.label.removeChild(this.label[o](".label-count")),this;let E,C=this.con,D=this.options.selected.length;return"string"!=typeof B&&(C.disabled?B="disabled":0==this.dropdown[p]("*[data-key]").length?B="empty"+(this.select.classList.contains("in-search")?"Search":""):C.multiLimit<=D?B="limit":!C.multiple&&0<this.options.selected.length?B=this.options.selected[0].innerText:"string"==typeof C.placeholder?B=C.placeholder:B="placeholder"+(C.multiple&&C.multiLimit<Infinity?"Multi":"")),B=(this.__[B]||B).replace(":limit",C.multiLimit),B=`<span class="label-inner">${B}</span>`,E=C.multiShowLimit&&C.multiLimit<Infinity,C.multiple&&C.multiShowCount&&(B=`<span class="label-count">:c</span>\n${B}`,B=B.replace(":c",D+(E?" / "+C.multiLimit:""))),this.label.innerHTML=B,this},updateContainer(B){if(!this.container||!this.con.multiContainer)return this;let C=`[data-group='${B.group}'][data-key='${B.key}']`;if(this.container[o](C))return B.selected||this.container.removeChild(this.container[o](C)),this;if(B.selected){let D=g("DIV","select-handle");D.innerText=B.value,D[x]("data-key",B.key),D[x]("data-group",B.group),D.addEventListener("click",E=>{E.preventDefault(),E.stopPropagation(),this.options.unselect(E.target[u]("data-key"),E.target[u]("data-group"))}),this.container.appendChild(D)}return this},updatePin(B){let C=this.dropdown[o](".dropdown-inner ul");if(!this.con.multiPinSelected||!C)return this;if(option=this.dropdown[o](`li[data-key='${B.key}'][data-group='${B.group}']`),B.selected)C.insertBefore(option,C.children[0]);else{let D=this.dropdown[o](`ul[data-group='${B.group}']`),E=this.options[B.index-1],F=!1;for(;E.group==B.group&&!(F=D[o](`li[data-key='${E.key}']`));)E=this.options[E.index-1];F&&F.nextElementSibling?D.insertBefore(option,F.nextElementSibling):D.appendChild(option)}return this},updateCSV(){if(!this.csvInput||!this.con.csvOutput)return this;let C=this.options.selected.map(D=>D.value);return this.csvInput.value=C.join(this.con.csvSeparator||","),this},open(B){if(/active|idle/.test(this.select.className)||this.con.disabled)return!1;this.calc();let C=function(){this.select.classList.add("active"),this.select.classList.remove("idle"),this.dropdown.style.height="auto",this.dropdown.style.overflow="visible",this.label[y]("style"),this.con.search&&this.con.searchFocus&&this.dropdown[o]("input").focus(),this.trigger.call(this,"open")},D=this,E=this.dropdown.style;if(this.con.animate&&!1!==B){this.label.style.zIndex=25,this.dropdown.style.cssText+="height:0;display:block;overflow:hidden;",this.select.classList.add("idle");let F=()=>{let G=parseInt(E.height,10),H=parseInt(E.maxHeight,10);return G>=H?C.call(D):void(E.height=(G+50>H?H:G+50)+"px",setTimeout(F,20))};F()}else E.cssText=`height:${E.maxHeight};display:block;overflow:hidden;`,C.call(this);return this},close(B){if(!this.select.classList.contains("active")||this.select.classList.contains("idle"))return!1;let C=function(){this.select.classList.remove("idle","active"),this.dropdown[y]("style"),this.dropdown[o](".dropdown-inner")[y]("style"),this.trigger.call(this,"close")},D=this,E=this.dropdown;if(this.con.animate&&!1!==B){this.select.classList.add("idle"),this.dropdown.style.overflow="hidden";let F=()=>{return 0>=parseInt(E.offsetHeight,10)-50?C.call(D):void(E.style.height=parseInt(E.offsetHeight,10)-50+"px",setTimeout(F,20))};F()}else C.call(this);return this},toggle(B){return this.select.classList.contains("active")?this.close(B):this.select.classList.contains("idle")?this:this.open(B)},remove(){return this.e[y]("data-tail-select"),this.e[t]("data-select-hidden")&&("0"==this.e[u]("data-select-hidden")&&this.e.style.removeProperty("display"),this.e[y]("data-select-hidden")),Array.from(this.e[p]("[data-select-option='add']"),B=>{B.parentElement.removeChild(B)}),Array.from(this.e[p]("[data-select-optgroup='add']"),B=>{B.parentElement.removeChild(B)}),this.e.name=this.csvInput?this.csvInput.name:this.e.name,this.select[q].removeChild(this.select),this.container&&Array.from(this.container[p](".select-handle"),B=>{B.parentElement.removeChild(B)}),this},reload(){return this.remove().init()},config(B,C){if(B instanceof Object){for(let E in B)this.config(E,B[E],!1);return this.reload()?this.con:this.con}return"undefined"==typeof B?this.con:!!(B in this.con)&&("undefined"==typeof C?this.con[B]:(this.con[B]=C,!1!==this.rebuild&&this.reload(),this))},enable(){return this.select.classList.remove("disabled"),(this.disabled=!1)?this:this},disable(){return this.select.classList.add("disabled"),(this.disabled=!0)?this:this},on(B,C,D){return 0>["open","close","change"].indexOf(B)||"function"!=typeof C?!1:(B in this.events||(this.events[B]=[]),this.events[B].push({cb:C,args:D instanceof Array?D:[]}),this)}},A=z.options=function(B,C){return this instanceof A?(this.self=C,this.element=B,this.length=0,this.selected=[],this.disabled=[],this.items={"#":{}},this.groups={},this):new A(B,C)},A.prototype={_r(B){return B.replace("disabled","disable").replace("enabled","enable").replace("selected","select").replace("unselected","unselect")},get(B,C){if("object"==typeof B&&B.key&&B.group)C=B.group||"#",B=B.key;else if(B instanceof Element)"OPTION"==B.tagName?(C=B[q].label||"#",B=B.value||B.innerText):B[t]("data-key")&&(C=B[u]("data-group")||B[q][u]("data-group")||"#",B=B[u]("data-key"));else{if("number"==typeof B)return this.get(this[B]);if("string"!=typeof B)return!1}return!!(C in this.items)&&this.items[C][B]},set(B,C){let D=B.value||B.innerText,E=B[q].label||"#";if(E in this.items||(this.items[E]={},this.groups[E]=B[q]),D in this.items[E])return!1;let F=this.self.con,G=!F.multiple&&0<this.selected.length;if((G||F.multiple&&this.selected.length>=F.multiLimit)&&(B.selected=!1),B.selected&&F.deselect&&(!B[t]("selected")||0==F.multiLimit)&&(B.selected=!1,B.parentElement.selectedIndex=-1),B[t]("data-description")){let H=g("SPAN");H.innerHTML=B[u]("data-description"),B[x]("data-description",H.innerHTML)}return this[this.length++]=this.items[E][D]={key:D,value:B.text,index:this.length-1,description:B[u]("data-description")||null,group:E,option:B,optgroup:"#"==E?void 0:this.groups[E],selected:B.selected,disabled:B.disabled},B.selected&&this.select(this.items[E][D]),B.disabled&&this.disable(this.items[E][D]),!C||this.self.callback(this[this.length-1],"rebuild")},add(B,C,D,E,F,G,H){if(B instanceof Object){for(let L in B){let{value:M,group:N,selected:O,disabled:P,description:Q}=B[L];this.add(L,M,N,O,P,Q,!1)}return this.self.query()}if(this.get(B,D))return!1;if(D="string"==typeof D?D:"#","#"!==D&&!(D in this.groups)){let L=g("OPTGROUP");L.label=D,L[x]("data-select-optgroup","add"),this.element.appendChild(L),this.items[D]={},this.groups[D]=L}let I=this.self.con,J=!I.multiple&&0<this.selected.length;(J||I.multiple&&this.selected.length>=I.multiLimit)&&(E=!1),F=!!F;let K=n.createElement("OPTION");return K.value=B,K.selected=E,K.disabled=F,K.innerText=C,K[x]("data-select-option","add"),G.length&&0<G.length&&K[x]("data-description",G),("#"==D?this.element:this.groups[D]).appendChild(K),this.set(K,H)},move:function(B,C,D,E){if(!(B=this.get(B,C)))return!1;if("#"!==D&&!(D in this.groups)){let F=g("OPTGROUP");F.label=D,this.element.appendChild(F),this.items[D]={},this.groups[D]=F,this.groups[D].appendChild(B.option)}return delete this.items[B.group][B.key],B.group=D,B.optgroup=this.groups[D]||void 0,this.items[D][B.key]=B,!E||this.self.query()},remove(B,C,D){return!!(B=this.get(B,C))&&(B.selected&&this.unselect(B),B.disabled&&this.enable(B),B.option[q].removeChild(B.option),Array.prototype.splice.call(this,B.index,1),delete this.items[B.group][B.key],0===Object.keys(this.items[B.group]).length&&(delete this.items[B.group],delete this.groups[B.group]),!D||this.self.query())},is(B,C,D){return(B=this._r(B),C=this.get(C,D),!C||0>["select","unselect","disable","enable"].indexOf(B))?null:"disable"==B||"enable"==B?"disable"==B?C.disabled:!C.disabled:("select"==B||"unselect"==B)&&("select"==B?C.selected:!C.selected)},handle(B,C,D,E){if(B=this._r(B),C=this.get(C,D),!C||0>["select","unselect","disable","enable"].indexOf(B))return null;if("disable"==B||"enable"==B)return C.option in this.disabled||"disable"!=B?C.option in this.disabled&&"enable"==B&&this.disabled.splice(this.disabled.indexOf(C.option),1):this.disabled.push(C.option),C.disabled="disable"==B,C.option.disabled="disable"==B,this.self.callback.call(this.self,C,B);let F=this.self.select.classList.contains("disabled")||C.disabled||C.option.disabled,G=this.self.con.multiple&&this.self.con.multiLimit<=this.selected.length,H=!this.self.con.multiple&&0<this.selected.indexOf(C.option),I=0==this.self.con.multiLimit&&!0==this.self.con.deselect,J=!this.self.con.multiple&&!this.self.con.deselect&&!0!==E;if("select"==B){if(F||G||I||H)return!1;if(!this.self.con.multiple)for(let K in this.selected)this.unselect(this.selected[K],void 0,!0);0>this.selected.indexOf(C.option)&&this.selected.push(C.option)}else if("unselect"==B){if(F||J)return!1;this.selected.splice(this.selected.indexOf(C.option),1)}return C.selected="select"==B,C.option.selected="select"==B,C.option[(6<B.length?"remove":"set")+"Attribute"]("selected","selected"),this.self.callback.call(this.self,C,B)},enable(B,C){return this.handle("enable",B,C)},disable(B,C){return this.handle("disable",B,C)},select(B,C){return this.handle("select",B,C)},unselect(B,C,D){return this.handle("unselect",B,C,D)},toggle(B,C){return!!(B=this.get(B,C))&&this.handle(B.selected?"unselect":"select",B,C)},invert(B){if(B=this._replaceType(B),0<=["enable","disable"].indexOf(B)){let D=this.disabled,E="enable"==B?"disable":"enable"}else if(0<=["select","unselect"].indexOf(B)){let D=this.selected,E="select"==B?"unselect":"select"}let C=Array.from(this).filter(D=>{!(D in invert)});return[].concat(invert).forEach(D=>{this.handle(action,D)}),[].concat(C).forEach(D=>{this.handle(B,D)}),!0},all(B,C){let D=this;return C in this.items?D=Object.keys(this.items[C]):0<=["unselect","enable"].indexOf(B)&&(D="unselect"==B?this.selected:this.disabled),[].concat(Array.from(D)).forEach(E=>{this.handle(B,E,C)}),!0},*finder(B,C){B=B.replace(/[\[\]{}()*+?.,^$\\|#-]/g,"\\$&");let D="<option(\\s+\\w+(\\s*=\\s*(?:\\\".*?\\\"|'.*?'))?)*>[^<]*("+B+")[^<]*<\\/option>";"any"==C&&(D="<option((\\s+[a-z0-9_-]+(\\s*=\\s*(\\\".*?"+B+".*?\\\"|'.*?"+B+".*?'))?)>.+?",D+="|(\\s+\\w+(\\s*=\\s*(?:\\\".*?\\\"|'.*?'))?)+>[^<]*("+B+")[^<]*)<\\/option>");for(let G,H,I,E=this.self.e.innerHTML,F=new RegExp(D,"gmi");null!==(G=F.exec(E));)I=(E.substr(0,F.lastIndex).match(/\<\/option\>/g)||[]).length,H=this.get(this.self.e.options[I-1]),H&&(yield H)},find(B,C,D){let E=[];for(let F of this.finder(B,D))E.push(F);return E},*walker(B,C){let D=Object.keys(this.groups);"ASC"==C?D.sort():"DESC"==C?D.sort().reverse():"function"==typeof C&&(D=C.call(this,D)),D.unshift("#");for(let E=D.length,F=0;F<E;F++){let G=D[F],H=Object.keys(this.items[G]);"ASC"==B?H.sort():"DESC"==B?H.sort().reverse():"function"==typeof B&&(H=B.call(this,H));for(let I=H.length,J=0;J<I;J++)yield this.items[G][H[J]]}}},{select:z,options:A}}(window||this);export{select,options};
