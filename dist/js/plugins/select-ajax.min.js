/*! pytesNET/tail.select v0.6.0-beta | ECMAScript 5 | @copyright pytesNET <info@pytes.net> */
!function(e,a){"function"==typeof define&&define.amd?define(["tail.select"],a):"object"==typeof module&&module.exports?module.exports=a:a(e.tail.select)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(l){"use strict";var e={ajax:!0,ajaxCallback:null,ajaxOn:"init",ajaxReset:!1,ajaxSearch:!1},a={"init:before":function(){return this.set("ajax",this.get("ajax")&&"function"==typeof this.get("ajaxCallback")),this._ajax=!1,this._ajax_call=!1,!(this._ajax_result=void 0)},"init:after":function(){return this._ajax="init"===this.get("ajaxOn"),!0},open:function(){"open"===this.get("ajaxOn")&&(this._ajax=!0,this.query.apply(this,this._last_query))},"query:before":function(i,n){if(!this.get("ajax")||"finder"===i&&!this.get("ajaxSearch"))return!0;var e="init"===this.get("ajaxOn")?"loading":void 0,a=function(){var e=this.render("ajax-loading",null,[i,n]),a=l.__.create("DIV","dropdown-inner");a.appendChild(e);var t=this._dropdown.querySelector(".dropdown-inner");this._dropdown[(t?"replace":"append")+"Child"](a,t)}.bind(this);if(this._ajax||a(),this._ajax){if(!(void 0===this._ajax_result||this.get("ajaxReset")&&"ajax"!==i))return!0;if(this._ajax_call)return!1;this._ajax_call=!0,function(e){a(),setTimeout(function(){o.call(e,i,n)},0)}.call(this,this)}var t=this.value(),r=this.get("multiLimit",1/0);if(void 0===e){switch(!0){case this.get("disabled"):e="disabled";break;case this.get("multiple")&&r===1/0:e=0===t.length?"multiple":"multipleList";break;case this.get("multiple")&&r!==1/0:e=t.length===r?"multipleLimit":"multipleCount";break;default:e=this.get("multiple")?"multiple":"single"}"disabled"!==e&&(e="string"==typeof this.get("placeholder")?this.get("placeholder"):e)}return this.updateLabel(e).updateCSV(),!1},render:function(e){return e["ajax-loading"]=function(){var e=l.__.create("DIV","dropdown-ajax-loading");return e.innerHTML="<span>"+this._e("loading")+"</span>",e},e["ajax-error"]=function(e){var a=l.__.create("DIV","dropdown-ajax-error");return a.innerHTML="<span>"+(e||this._e("error"))+"</span>",a},[e]}},o=function(n,r){var o=this,e={success:function(e,a){if(void 0!==o._ajax_result&&!a)for(var t in o._ajax_result){var i=o._ajax_result[t];"string"==typeof i||i instanceof HTMLElement?o.options.remove(t,!1):o.options.remove([t,i.group||i.optgroup||"#"],!1)}o._ajax_call=!1,o._ajax_result=e,o.options.add(e,null,!1),o.query.apply(o,["ajax",o._last_query[1]])},error:function(e){o._ajax_call=!1,o._ajax_result=void 0;var a=l.__.create("DIV","dropdown-inner"),t=o.render("ajax-error",e,[n,r]);a.appendChild(t);var i=o._dropdown.querySelector(".dropdown-inner");o._dropdown[(i?"replace":"append")+"Child"](a,i)}};(o.get("ajaxCallback")||function(){this.error("No Walker set")}).call(e,n,r)};return l.plugins.add("ajax",e,a),l.strings.en.error="An Error is occured",l.strings.en.loading="Loading",l});