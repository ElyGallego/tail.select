/*! pytesNET/tail.select v0.6.0-beta | ECMAScript 5 | @copyright pytesNET <info@pytes.net> */
!function(a,e){"function"==typeof define&&define.amd?define(["tail.select"],e):"object"==typeof module&&module.exports?module.exports=e:e(a.tail.select)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(l){"use strict";var a={ajax:!0,ajaxCallback:null,ajaxOn:"init",ajaxReset:!1,ajaxSearch:!1},e={"init:before":function(){return this.set("ajax",this.get("ajax")&&"function"==typeof this.get("ajaxCallback")),this._ajax=!1,this._ajax_call=!1,!(this._ajax_result=void 0)},"init:after":function(){return this._ajax="init"===this.get("ajaxOn"),!0},open:function(){"open"===this.get("ajaxOn")&&(this._ajax=!0,this.query.apply(this,this._last_query))},"query:before":function(n,r){if(!this.get("ajax")||"finder"===n&&!this.get("ajaxSearch"))return!0;var a="init"===this.get("ajaxOn")?"loading":void 0,e=function(a){var e=this.render("ajax-"+(a?"waiting":"loading"),null,[n,r]),t=l.__.create("DIV","dropdown-inner");t.appendChild(e);var i=this._dropdown.querySelector(".dropdown-inner");this._dropdown[(i?"replace":"append")+"Child"](t,i)}.bind(this);if("input"===this.get("ajaxOn")&&"finder"===n&&(this._ajax=!0),this._ajax||e("input"===this.get("ajaxOn")),this._ajax){if(!(void 0===this._ajax_result||this.get("ajaxReset")&&"ajax"!==n))return!0;if(this._ajax_call)return!1;this._ajax_call=!0,function(a){e(0),setTimeout(function(){o.call(a,n,r)},0)}.call(this,this)}var t=this.value(),i=this.get("multiLimit",1/0);if(void 0===a){switch(!0){case this.get("disabled"):a="disabled";break;case this.get("multiple")&&i===1/0:a=0===t.length?"multiple":"multipleList";break;case this.get("multiple")&&i!==1/0:a=t.length===i?"multipleLimit":"multipleCount";break;default:a=this.get("multiple")?"multiple":"single"}"disabled"!==a&&(a="string"==typeof this.get("placeholder")?this.get("placeholder"):a)}return this.updateLabel(a).updateCSV(),!1},"query:after":function(){return console.log(this._label.querySelector("input")),this._label.querySelector("input").focus(),!0},render:function(a){return a["ajax-waiting"]=function(a){var e=l.__.create("DIV","dropdown-ajax dropdown-ajax-waiting");return e.innerHTML="<span>"+(a||this._e("waiting"))+"</span>",e},a["ajax-loading"]=function(){var a=l.__.create("DIV","dropdown-ajax dropdown-ajax-loading");return a.innerHTML="<span>"+this._e("loading")+"</span>",a},a["ajax-error"]=function(a){var e=l.__.create("DIV","dropdown-ajax dropdown-ajax-error");return e.innerHTML="<span>"+(a||this._e("error"))+"</span>",e},[a]}},o=function(n,r){var o=this,a={success:function(a,e){if(void 0!==o._ajax_result&&!e)for(var t in o._ajax_result){var i=o._ajax_result[t];"string"==typeof i||i instanceof HTMLElement?o.options.remove(t,!0):o.options.remove([t,i.group||i.optgroup||"#"],!0)}o._ajax_call=!1,o._ajax_result=a,o.options.add(a,null,!1),o.query.apply(o,["ajax",o._last_query[1]])},error:function(a){o._ajax_call=!1,o._ajax_result=void 0;var e=l.__.create("DIV","dropdown-inner"),t=o.render("ajax-error",a,[n,r]);e.appendChild(t);var i=o._dropdown.querySelector(".dropdown-inner");o._dropdown[(i?"replace":"append")+"Child"](e,i)}};(o.get("ajaxCallback")||function(){this.error("No Walker set")}).call(a,n,r)};return l.plugins.add("ajax",a,e),l.strings.en.error="An Error is occured",l.strings.en.loading="Loading",l.strings.en.waiting="Waiting for input",l});