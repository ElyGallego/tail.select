/*! pytesNET/rat.select | @version 1.0.0-rc.1 | @license MIT | @copyright pytesNET <info@pytes.net> */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("rat.select")):"function"==typeof define&&define.amd?define(["rat.select"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).rat.select)}(this,(function(e){"use strict";var t=function(){function e(e){this.select=e}return e.prototype.applyLinguistic=function(e,t){var i=this.select.get("search.linguistic",{}),n=Object.keys(i).map((function(e){return n.push("("+e+"|["+i[e]+"])")}));return n.length>0&&(t&&(n=n.concat(n.map((function(e){return e.toLocaleUpperCase()})))),e=e.replace(new RegExp(n.join("|"),t?"g":"gi"),(function(e){return n[[].indexOf.call(arguments,e,1)-1]}))),e},e.prototype.finder=function(e,t){var i=this;this.state("search",!0);var n={};t.map((function(e){return n["regex"===e?"regexp":e]=!0})),this.get("search.linguistic")&&(e=this.plugins.plugins.search.applyLinguistic(e,n.strict));var r,s,c=e;return n.regexp?(c=n.comma?"("+c.split(",").map((function(e){return e.trim()})).join("|")+")":c,c=n.whole?"\\b"+c+"\\b":c,r=function(e){return new RegExp(c,n.strict?"m":"mi").test(e)}):(c=n.strict?c.toLocaleLowerCase():c,r=function(t){return t=n.strict?t.toLocaleLowerCase():t,n.comma?e.split(",").some((function(e){return e.trim().indexOf(t)>=0})):t.indexOf(e)>=0}),s=n.any?function(e){return r(e.innerText)||[].some.call(e.attributes,r)}:n.attr?function(e){return[].some.call(e.attributes,r)}:n.visible?function(e){return r(e.innerText)||r(e.dataset.description||"")}:function(e){return r(e.innerText)},[].filter.call(this.source.options,(function(e){return s.call(i,e)}))},e.prototype["build:after"]=function(){this.search=document.createElement("INPUT"),this.search.type="text",this.search.className="dropdown-search",this.search.placeholder=this.locale._("search"),this.dropdown.insertBefore(this.search,this.dropdown.children[0]),this.select.classList.add("plugin-search")},e.prototype["bind:after"]=function(){this.search.addEventListener("input",this.handler)},e.prototype["handle:before"]=function(e){var t=this;if(e instanceof Event&&!this.get("disabled")&&"input"===e.type&&e.target===this.search){var i=e.target.value;if(i.length>=this.get("search.minimum",3)){var n=this.get("search.finder",this.plugins.plugins.search.finder);if(this.get("search.async")){var r=document.createElement("DIV");r.className="dropdown-spinner",this.dropdown.querySelector(".dropdown-inner").innerHTML=r.outerHTML,setTimeout((function(){t.query(n,[i,t.get("search.config",["text","visible"])])}),250)}else this.query(n,[i,this.get("search.config",["text","visible"])])}else this.state("search")&&(this.state("search",!1),this.query())}},e.prototype["render#option"]=function(e,t,i){if(!this.state("search")||!this.get("search.mark",!0))return[e,t,i];var n=this.search.value,r=new RegExp("("+this.plugins.plugins.search.applyLinguistic(n,!1)+")","gi");return[].map.call(e.children,(function(e){e.innerHTML=e.innerHTML.replace(r,"<mark>$1</mark>")})),[e,t,i]},e.prototype.open=function(){this.get("search.focus",!1)&&this.search.focus()},e}();e.Strings.en.search="Tap to search...",e.Plugins.add("search",t)}));
/*! Visit this project on https://rat.md/select */