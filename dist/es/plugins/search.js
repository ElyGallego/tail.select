/*! pytesNET/rat.select | @version 1.0.0 | @license MIT | @copyright pytesNET <info@pytes.net> */
import e from"rat.select";e.Strings.en.search="Tap to search...",e.Plugins.add("search",class{constructor(e){this.select=e}applyLinguistic(e,t){let s=this.select.get("search.linguistic",{}),i=Object.keys(s).map((e=>i.push(`(${e}|[${s[e]}])`)));return i.length>0&&(t&&(i=i.concat(i.map((e=>e.toLocaleUpperCase())))),e=e.replace(new RegExp(i.join("|"),t?"g":"gi"),(function(e){return i[[].indexOf.call(arguments,e,1)-1]}))),e}finder(e,t){this.state("search",!0);let s={};t.map((e=>s["regex"===e?"regexp":e]=!0)),this.get("search.linguistic")&&(e=this.plugins.plugins.search.applyLinguistic(e,s.strict));let i,r,a=e;return s.regexp?(a=s.comma?`(${a.split(",").map((e=>e.trim())).join("|")})`:a,a=s.whole?`\\b${a}\\b`:a,i=e=>new RegExp(a,s.strict?"m":"mi").test(e)):(a=s.strict?a.toLocaleLowerCase():a,i=t=>(t=s.strict?t.toLocaleLowerCase():t,s.comma?e.split(",").some((e=>e.trim().indexOf(t)>=0)):t.indexOf(e)>=0)),r=s.any?e=>i(e.innerText)||[].some.call(e.attributes,i):s.attr?e=>[].some.call(e.attributes,i):s.visible?e=>i(e.innerText)||i(e.dataset.description||""):e=>i(e.innerText),[].filter.call(this.source.options,(e=>r.call(this,e)))}"build:after"(){this.search=document.createElement("INPUT"),this.search.type="text",this.search.className="dropdown-search",this.search.placeholder=this.locale._("search"),this.dropdown.insertBefore(this.search,this.dropdown.children[0]),this.select.classList.add("plugin-search")}"bind:after"(){this.search.addEventListener("input",this.handler)}"handle:before"(e){if(!(e instanceof Event)||this.get("disabled"))return;if("input"!==e.type||e.target!==this.search)return;let t=e.target.value;if(t.length>=this.get("search.minimum",3)){let e=this.get("search.finder",this.plugins.plugins.search.finder);if(this.get("search.async")){let s=document.createElement("DIV");s.className="dropdown-spinner",this.dropdown.querySelector(".dropdown-inner").innerHTML=s.outerHTML,setTimeout((()=>{this.query(e,[t,this.get("search.config",["text","visible"])])}),250)}else this.query(e,[t,this.get("search.config",["text","visible"])])}else this.state("search")&&(this.state("search",!1),this.query())}"render#option"(e,t,s){if(!this.state("search")||!this.get("search.mark",!0))return[e,t,s];let i=this.search.value,r=new RegExp(`(${this.plugins.plugins.search.applyLinguistic(i,!1)})`,"gi");return[].map.call(e.children,(e=>{e.innerHTML=e.innerHTML.replace(r,"<mark>$1</mark>")})),[e,t,s]}open(){this.get("search.focus",!1)&&this.search.focus()}});
/*! Visit this project on https://rat.md/select */