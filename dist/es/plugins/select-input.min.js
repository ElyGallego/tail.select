/*! pytesNET/tail.select v{{ $data.version }}-beta | {{ $build }} | @copyright pytesNET <info@pytes.net> */
export function plugin(e){"use strict";var t={input:!0,create:!1,createCallback:null,createHidden:!1,createGroup:"#",createRemove:!1},i={"init:before":function(){return this.get("input")&&this.set("search",!0),!0},"build:after":function(){return this.get("input")&&(this._label.classList.add("label-input"),this._search.querySelector("input").removeAttribute("placeholder"),this._search.className="label-search"),!0},"bind:before":function(e){if(!(e instanceof Event&&this.get("input")))return!0;if("input"!==e.type||e.target!==this._search.children[0])return!0;this.calculateLabelInput();let t=e.target;return t.value.length>=Math.max(this.get("searchMinLength",3),1)?this.query("finder",[t.value,this.get("searchConfig",["text","value"]),this.get("sortSearch")]):this._last_query[0]!==this.options.walker&&this.query("walker",[this.get("sortGroups"),this.get("sortItems")]),t.focus(),!1},"update#label":function(t,i,r,a){if(!this.get("input"))return[t,i,r,a];let n=e.__.create("DIV",this._label.className);if(this.get("multiple")||i!==this.value()?(this._search.children[0].setAttribute("placeholder",this._e(i,a)),this.calculateLabelInput(this._e(i,a))):(this._search.children[0].value=i,this.calculateLabelInput(i)),r){let t=e.__.create("DIV","label-count");t.innerHTML=this._e(r,a),n.appendChild(t)}let s=e.__.create("DIV","label-inner");return s.appendChild(this._search),n.appendChild(s),[n,i,r,a]},"render#empty":function(t){if(!this.get("input")||!this.get("inputCreate"))return[t];let i=e.__.create("SPAN","dropdown-create");return i.innerHTML=`<b>${this._e("createOption")}</b>`+`<span>${this._search.children[0].value}</span>`,[i]}};return e.plugins.add("input",t,i),e.strings.en.createOption="Press Return to create",e.prototype.calculateLabelInput=function(t){if(!this.get("input"))return this;let i=e.__.create("SPAN","search-width");return i.innerText=t||this._search.children[0].value,this._label.appendChild(i),this._search.children[0].style.width=Math.max(i.offsetWidth,2)+"px",this._label.removeChild(i),this},e};