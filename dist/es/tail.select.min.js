/*! pytesNET/tail.select v{{ $data.version }}-beta | {{ $build }} | @copyright pytesNET <info@pytes.net> */
let{select:select,options:options}=function(e,t){"use strict";const i={trigger:(e,t,i)=>{let s=new CustomEvent(t,i);return e.dispatchEvent(s)},clone:(e,t)=>Object.assign({},e,t||{}),create:(e,i=[])=>{var s=t.createElement(e);return s.className=Array.isArray(i)?i.join(" "):i||"",s}},s={en:{buttonAll:"All",buttonNone:"None",disabled:"This field is disabled",empty:"No options available",emptySearch:"No options found",multiple:"Choose one or more options...",multipleCount:"Choose up to [1] options...",multipleLimit:"No more options selectable...",multipleList:"[0] options selected",search:"Tap to search...",single:"Choose an option..."},add:function(e,t,s){return e in this||(this[e]=i.clone(this.en,{})),t instanceof Object?(this[e]=i.clone(this[e],t),!0):"string"==typeof t&&"string"==typeof s&&(this[e][t]=s,!0)}};class l{constructor(e,t){this.self=t,this.active={};for(let s in e)if(s in l.plugins){let n=l.plugins[s];t.set(i.clone(n.options,e[s])),this.active[s]=n}}callbacks(e){let t=[];for(let i in this.active)e in this.active[i].hooks&&t.push(this.active[i].hooks[e]);return t}}l.plugins={},l.add=function(e,t,i){return!(e in this.plugins)&&(this.plugins[e]={hooks:i,options:t},!0)};class n{constructor(e){if(this.parent=e,this.source=e.e,[].map.call(this.source.querySelectorAll("option:not([value])"),e=>{""!==e.innerText&&e.setAttribute("value",e.innerText)}),this.parent.get("deselect")&&!this.parent.get("multiple")){let e=this.source.querySelector("option:checked");null===this.source.querySelector("option[selected]")&&(e&&(e.selected=!1),this.source.selectedIndex=-1)}return this}create(e,i,s){let l=t.createElement("OPTION");if(l.setAttribute("value",e),l.innerText=i,void 0!==s&&s instanceof Object)for(let e in s)["group","optgroup","position"].indexOf(e)>=0||(["disabled","selected","hidden"].indexOf(e)>=0?l[e]=s[e]:l.setAttribute("description"===e?"data-description":e,s[e]));return l}get(e,t,i,s,l){if(e instanceof Object)return e;let n=(l?"[hidden]":!1===l?":not([hidden])":"")+(i?":checked":!1===i?":not(:checked)":"")+(s?":disabled":!1===s?":not(:disabled)":"");if("number"==typeof e){let t;n=`option${e>0?":nth-child":":nth-last-child"}(${Math.abs(e)})${n}`}else{if("string"!=typeof e&&e)return[];n="option"+("string"==typeof e?`[value="${e}"]`:"")+n}return t?"#"!==t?this.source.querySelectorAll(`optgroup[label="${t}"] ${n}`):"#"===t?(n=`select[data-tail-select="tail-${this.parent.id}"] > ${n}`,this.source.parentElement.querySelectorAll(n)):[]:this.source.querySelectorAll(n)}getGroups(e){var t=this.source.querySelectorAll("optgroup");return e?t:[].map.call(t,e=>e.label)}count(e,t,i,s){return 0===arguments.length?this.source.options.length:this.get(null,e||null,t,i,s).length}set(e,i,s,l=!0){if(!(e instanceof HTMLOptionElement))return e.forEach&&e.length&&e.length>0&&e.forEach((e,t)=>this.set(e,i,s<0?-1:s+t,!1)),l&&this.parent.reload(!0),this;null===i&&(i=e.parentElement.label||"#");let n=null,r=null;if("string"==typeof i&&"#"!==i){let l=this.source.querySelector(`optgroup[label='${i}']`);null===l&&((l=t.createElement("OPTGROUP")).setAttribute("label",i),l.setAttribute("data-select","add"),l.appendChild(e),this.source.appendChild(l),s=-1);let a=l.querySelectorAll("option");s<0||s>a.length?r=l:n=a[s]}else{let e=`select[data-tail-select="tail-${this.parent.id}"] > option`,t=this.source.parentElement.querySelectorAll(e);var a=Math.min(s<0?t.length:s,t.length);this.source.children.length!==a&&t[a-1].nextElementSibling?n=t[a-1].nextElementSibling||this.source.children[0]:r=this.source}return null===e.parentElement&&e.setAttribute("data-select","add"),n?n.parentElement.insertBefore(e,n):(r||this.source).appendChild(e),l&&this.parent.reload(!0),this}add(e,t,i=!0){let s,l,n;for(let i in e)"string"!=typeof e[i]?(l=e[i].optgroup||e[i].group||t||"#",n=e[i].position||-1,s=this.create(e[i].key||i,e[i].value||e[i].text,e[i]),this.set(s,l,n,!1)):this.set(this.create(i,e[i]),t||"#",-1,!1);return i&&this.parent.reload(!0),this}handle(e,t,i,s){if(!(e instanceof HTMLOptionElement)){let l=this.get[e instanceof Array?"apply":"call"](this,e),n=[];for(let e,i=0;i<l.length;i++)(e=this.handle(l[i],t,!0,s)).length>0&&(n=n.concat(e));return!i&&this.parent.update(n,!0,s),n}let l=this.parent.get.bind(this.parent),n=[],r={};for(t.hasOwnProperty("disabled")&&t.disabled!==e.disabled&&(e.disabled=null===t.disabled?!e.disabled:t.disabled,r.disabled=e.disabled),t.hasOwnProperty("hidden")&&t.hidden!==e.hidden&&(e.hidden=null===t.hidden?!e.hidden:t.hidden,r.hidden=e.hidden);t.hasOwnProperty("selected")&&(t.selected=null===t.selected?!e.selected:t.selected,!e.disabled&&!e.hidden&&e.selected!==t.selected||s)&&(!(t.selected&&l("multiple")&&l("multiLimit",1/0)<=this.count(null,!0))||s)&&(t.selected||l("multiple")||l("deselect")||s);){let i=this.source.options[this.source.selectedIndex];e.selected=t.selected,e[(t.selected?"set":"remove")+"Attribute"]("selected","selected"),r.selected=e.selected,t.selected&&!l("multiple")&&i?(i.selected=!1,i.removeAttribute("selected"),n.push([i,{selected:!1}])):t.selected||l("multiple")||!i||i!==e||(this.source.selectedIndex=-1);break}return Object.keys(r).length>0&&n.push([e,r]),!i&&this.parent.update(n,!0,s),n}select(e,t){return this.handle(e,{selected:!0},t)}unselect(e,t){return this.handle(e,{selected:!1},t)}disable(e,t){return this.handle(e,{disabled:!0},t)}enable(e,t){return this.handle(e,{disabled:!1},t)}hide(e,t){return this.handle(e,{hidden:!0},t)}show(e,t){return this.handle(e,{hidden:!1},t)}toggle(e,t,i){let s=((l={})[t]=null,l);var l;return this.handle(e,s,i)}reload(e,t){let i=this.parent.get("multiple")?this.parent.get("multiLimit"):1,s=this.source.querySelectorAll("option:checked").length,l=this.source.options,n=[];for(let e=l.length-1;e>=0;e--){let r={},a=l[e].parentElement.label||"#",h=`li[data-value="${l[e].value}"][data-group="${a}"]`,o=this.parent._dropdown.querySelector(h);for(let t in{selected:"",disabled:"",hidden:""})o.classList.contains(t)!==l[e][t]&&(r[t]=l[e][t]);!t&&r.selected&&s>i&&(delete r.selected,l[e].selected=!1,s--),Object.keys(r).length>0&&n.push([l[e],r])}return 0===n.length?[]:(!e&&this.parent.update(n,!0,!1),n)}applyLinguisticRules(e,t){var i=[],s=this.parent.get("linguisticRules",{});return Object.keys(s).forEach(e=>i.push("("+e+"|["+s[e]+"])")),t&&(i=i.concat(i.map(function(e){return e.toUpperCase()}))),0===i.length?e:e.replace(new RegExp(i.join("|"),t?"g":"ig"),function(e){return i[[].indexOf.call(arguments,e,1)-1]})}find(e,t,i){var s=this,l,n={};if("function"==typeof t?l=t.bind(this,e):t="string"==typeof t?[t]:t,t instanceof Array){t.forEach(e=>{"string"==typeof e&&(n[e]=!0)}),n.any=n.any?n.any:n.attributes&&n.value,n.regex&&!n.text||(e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),n.strict||(e=this.applyLinguisticRules.call(this,e,n.case)),n.word&&(e="\\b"+e+"\\b");var r=new RegExp(e,n.case?"m":"mi"),a=function(e){return r.test(e.innerText||e.value)};l=n.any?function(e){return a(e)||[].some.call(e.attributes,a)}:n.attributes?function(e){return[].some.call(e.attributes,a)}:a}let h=null===this.parent.get("hideDisabled")?"disabled":"",o=this.parent.get("hideEmpty",!0)?"value":"",c=null===this.parent.get("hideSelected")?"selected":"",d=null===this.parent.get("hideHidden",!0)?"hidden":"",u=[].filter.call(this.source.options,e=>!(e[h]||""===e[o]||e[c]||e[d])&&l.call(this,e));return"ASC"===i?u=[].sort.call([].slice.call(u,0),(e,t)=>e.value>t.value):"DESC"===i?u=[].sort.call([].slice.call(u,0),(e,t)=>e.value<t.value):"function"==typeof i&&(u=i.call(this,u)),u}*finder(e,t,i){let s=this.find(e,t,i);for(let e of s)yield e}*walker(e,t){let i=this.getGroups(!1)||[];"ASC"===e?i.sort():"DESC"===e?i.sort().reverse():"function"==typeof e&&(i=e.call(this,i)),i.unshift("#");for(let e of i){let i=this.get(null,e);"ASC"===t?i.sort((e,t)=>e.value>t.value):"DESC"===t?i.sort((e,t)=>e.value<t.value):"function"==typeof t&&(i=t.call(this,i));let s=null===this.parent.get("hideDisabled")?"disabled":"",l=this.parent.get("hideEmpty",!0)?"value":"",n=null===this.parent.get("hideSelected")?"selected":"",r=null===this.parent.get("hideHidden",!0)?"hidden":"";for(let e of i)e[s]||""===e[l]||e[n]||e[r]||(yield e)}}}class r{constructor(e,s,l){var a;return(e="string"==typeof e?t.querySelectorAll(e):e)instanceof Element?e instanceof HTMLSelectElement&&this instanceof r?r.inst[e.getAttribute("data-tail-select")]?r.inst[e.getAttribute("data-tail-select")]:(s=i.clone(s instanceof Object?s:{},{multiple:e.multiple,disabled:e.disabled,required:e.required,placeholder:e.getAttribute("data-placeholder")||(s||{}).placeholder}),this.id=++r.count,r.inst["tail-"+this.id]=this,this.e=e,this.con=i.clone({},s),this.options=l||n,this.callbacks={},this.init()):e instanceof HTMLSelectElement?new r(e,s,l):void 0:[].map.call(e,e=>new r(e,s,l)).filter(e=>"id"in e)}_e(e,t){for(var i in e="function"==typeof(e=e in this.__?this.__[e]:e)?e.call(this,t):e,t||{})e=e.replace(i,t[i]);return e}_cls(e,t){let i;return(t+(this.get("multiple")&&e.hasAttribute("selected")||e.selected?" selected":"")+(e.disabled?" disabled":"")+(e.hidden?" hidden":"")).trim()}init(){if(this.__=i.clone(r.strings.en,r.strings[this.get("locale",-1)]||{}),this.plugins=new l(this.get("plugins",{}),this),this.options instanceof n?this.options=new this.options.constructor(this):this.options=new this.options(this),this._spacing=1,this._last_query=["walker",[this.get("sortGroups"),this.get("sortItems")]],null===this.get("rtl")&&this.set("rtl",["ar","fa","he","mdr","sam","syr"].indexOf(this.get("locale","en"))>=0),!this.get("theme")){let s=i.create("SPAN","tail-select-theme-name");t.body.appendChild(s),this.set("theme",e.getComputedStyle(s,":after").content.replace(/"/g,"")),t.body.removeChild(s)}if(!0!==this.trigger("hook","init:before"))return this.get("startOpen")&&!this.get("disabled")?this.open():this;for(var s in this.build(this),this.e.setAttribute("data-tail-select",`tail-${this.id}`),this.get("items")instanceof Object&&this.options.add(this.get("items",{}),null,!1),this.get("on",{}))this.on(s,this.get("on",{})[s]);return void 0===this.listen&&(this.listen=function(e){this.bind.call(this,e)}.bind(this)),this.e.nextElementSibling?this.e.parentElement.insertBefore(this._select,this.e.nextElementSibling):this.e.parentElement.appendChild(this._select),this.get("sourceHide",!0)&&("none"===this.e.style.display?this._select.style.display="none":"hidden"===this.e.style.visibility?this._select.style.visibility="hidden":(this.e.style.display="none",this.e.setAttribute("data-tail-hidden","display"))),this.trigger("hook","init:after"),this.bind(this).query("walker",[this.get("sortGroups"),this.get("sortItems")]),this.get("startOpen")&&!this.get("disabled")?this.open():this}build(e){if(!0!==this.trigger("hook","build:before"))return this;let t=!0===this.get("classNames")?this.e.className:this.get("classNames");return this._select=i.create("DIV",function(e){return this.get("rtl")&&e.unshift("rtl"),this.get("hideSelected")&&e.unshift("hide-selected"),this.get("hideDisabled")&&e.unshift("hide-disabled"),this.get("hideHidden",!0)&&e.unshift("hide-hidden"),this.get("disabled")&&e.unshift("disabled"),this.get("multiple")&&e.unshift("multiple"),this.get("deselect")&&e.unshift("deselectable"),e.unshift(`tail-select theme-${this.get("theme").replace("-"," scheme-").replace("."," ")}`),e}.call(this,[].concat(t?t.split?t.split(" "):t:[]))),this._select.setAttribute("tabindex",this.e.getAttribute("tabindex")||"0"),this.get("width",250)&&(this._select.style.width=this.get("width",250)+(isNaN(this.get("width",250))?"":"px")),this._label=i.create("DIV","select-label"),this._dropdown=i.create("DIV",`select-dropdown title-${this.get("titleOverflow","break")}`),this._search=i.create("DIV","dropdown-search"),this._search.innerHTML='<input type="text" class="search-input" />',this._search.children[0].setAttribute("placeholder",this._e("search")),this._csv=i.create("INPUT","select-search"),this._csv.type="hidden",this._csv.name=function(e){return!0===e&&!this.e.hasAttribute("data-name")&&(e=this.e.name)&&this.e.removeAttribute("name"),e.split?e:this.e.getAttribute("data-name")}.call(this,this.get("csvOutput",!1)),this._select.appendChild(this._label),this._select.appendChild(this._dropdown),this.get("search")&&this._dropdown.appendChild(this._search),this.get("csvOutput")&&this._select.appendChild(this._csv),this.trigger("hook","build:after"),this}bind(e){if(!0!==this.trigger("hook","bind:before",[e]))return this;if(e instanceof r?(t.addEventListener("keydown",this.listen),t.addEventListener("click",this.listen),this.get("search")&&this._search.children[0].addEventListener("input",this.listen),this.get("sourceBind")&&this.e.addEventListener("change",this.listen)):null===e&&(t.removeEventListener("keydown",this.listen),t.removeEventListener("click",this.listen),this._search.children[0].addEventListener("input",this.listen),this.e.removeEventListener("change",this.listen)),!(e instanceof Event)||this.get("disabled"))return this;let i=e=>(e.preventDefault(),e.stopPropagation(),!0),s=e,l=s.target;if("click"===s.type&&l.getAttribute("for")===this.e.id)return this._select.focus(),i(s);if("input"===s.type&&l===this._search.children[0]){let e=l.value;if(e.length>=Math.max(this.get("searchMinLength",3),1))return this.query("finder",[e,this.get("searchConfig",["text","value"]),this.get("sortSearch")]);if(this._last_query[0]!==this.options.walker)return this.query("walker",[this.get("sortGroups"),this.get("sortItems")])}if("keydown"===s.type){let e=".dropdown-option:not(.disabled):not(.hidden)",l=s.keyCode||s.which,n=this._dropdown.querySelector(".dropdown-option.hover");switch(l+!!this._select.classList.contains("active")){case 32:if(this._select===t.activeElement)return!!i(s)&&this.open();default:if(!this._select.classList.contains("active"))return}switch(l){case 13:case 32+t.activeElement.tagName==="INPUT":if(i(s)&&n){let e=[n.getAttribute("data-value"),n.getAttribute("data-group")];this.options.toggle(e,"selected")}return!(!n||this.get("multiple")||this.get("stayOpen"))&&this.close();case 27:return!!i(s)&&this.close();case 38:case 40:let r=this._dropdown.querySelector(".dropdown-inner"),a=[].map.call(this._dropdown.querySelectorAll(e),e=>e),h=null;if(n&&a[a.indexOf(n)+(40===l?1:-1)]&&(h=a[a.indexOf(n)+(40===l?1:-1)]),h||40!=l?h||38!=l||(h=a[a.length-1]):h=this._dropdown.querySelector(e),h){h&&h.classList.add("hover"),n&&n.classList.remove("hover");let e=function(e,t){for(;(e=e.parentElement)!=r;)t.top+=e.offsetTop;return t}(h,{top:h.offsetTop,height:h.offsetHeight});r.scrollTop=Math.max(0,e.top-2*e.height)}return i(s)}}if("click"===s.type){if(this._label.contains(l))return this.toggle();if(!this._select.contains(l)&&!0!==this.get("stayOpen"))return this.close();if(this._dropdown.contains(l)){let e,i,s;do{if(!l||l==t)return!1;e=l.getAttribute("data-value"),i=l.getAttribute("data-group"),s=l.getAttribute("data-action")}while((!s||!e&&!i)&&null!==(l=l.parentElement));if(s&&(e||i)){let t="toggle"===s?[[e,i],"selected"]:[[e,i]];if(this.options[s].apply(this.options,t),!this.get("stayOpen")&&this.options.count(null,!0)>=(this.get("multiple")?this.get("multiLimit"):1))return this.close()}}}return"change"===s.type&&void 0===s.detail?!!i(s)&&this.options.reload():(this.trigger("hook","bind:after",[e]),!0)}calculate(){let t=this._dropdown,i=this._dropdown.querySelector(".dropdown-inner"),s=this._dropdown.contains(this._search)?this._search.clientHeight:0;if(!i)return this;let l=function(s){let l=t.cloneNode(!0);if(l.classList.add("cloned"),this._select.appendChild(l),"string"==typeof s&&":"===s.charAt(0)){let t=i.querySelector(".dropdown-option").offsetHeight,n=parseInt(e.getComputedStyle(i.querySelector("li:first-child")).marginTop);l.style.setProperty("max-height",t*parseInt(s.slice(1))+n+"px")}else l.style.setProperty("max-height",s+(isNaN(s)?"":"px"));return s=l.offsetHeight>s?s:l.offsetHeight,this._select.removeChild(l),s}.call(this,this.get("height",350)?this.get("height",350):"auto");"string"==typeof this.get("height")&&":"===this.get("height").charAt(0)&&(l+=s);let n=this._select.getBoundingClientRect(),r=n.x||n.top,a=e.innerHeight-(n.top+n.height),h=this.get("openAbove",null)||!(a>=l||a>=r);return l=Math.min(l,(h?r:a)-15),this._select.classList[h?"add":"remove"]("open-top"),this._dropdown.querySelector("li.optgroup-sticky")&&(this._spacing=this._dropdown.querySelector("li.optgroup-sticky").offsetHeight),t.style.maxHeight=l+"px",i.style.maxHeight=l-s+"px",this}trigger(e,t,s=[]){if("event"===e){let e={bubbles:!1,cancelable:!0,detail:{args:s,self:this}};"change"===t&&(i.trigger(this.e,"input",e),i.trigger(this.e,"change",e)),i.trigger(this._select,`tail::${t}`,e)}let l=!0;return this.plugins.callbacks(t).concat(this.callbacks[t]||[]).forEach(t=>{"filter"===e?s=t.apply(this,s):!1===t.apply(this,s)&&(l=!1)}),"filter"===e?s:l}query(t,s){if(!0!==this.trigger("hook","query:before",[t,s]))return this;[t,s]=this.trigger("filter","query",[t,s||[]]),"string"==typeof t&&(t=this.options[t in this.options?t:"walker"]);let l=[],n=null,r=null,a=function(i){let a=i.parentElement instanceof HTMLOptGroupElement&&i.parentElement.label||"#";if([i,a]=this.trigger("filter","query#walk",[i,a]),r===a)return!0;if(!(l.length>0&&l[0].getAttribute("data-group")===a)){let e=i.parentElement instanceof HTMLOptGroupElement?i.parentElement:null;if(null===(n=this.render("group",e,[t,s])))return r=a,!0;if(!1===n)return!1;n.setAttribute("data-group",a),l.unshift(n)}return null===(n=this.render("item",i,[t,s]))||!1!==n&&(n.setAttribute("data-group",a),n.setAttribute("data-value",i.value||i.innerText),n.setAttribute("data-action","toggle"),l[0].appendChild(n),"scroll"===this.get("titleOverflow")&&function(t,i){setTimeout(function(){let i=e.getComputedStyle(t),s=t.clientWidth-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-17,l=t.querySelector(".option-title");if(l.scrollWidth>s){let e=s-l.scrollWidth-15;l.style.paddingLeft=Math.abs(e)+"px",t.style.textIndent=e+"px"}},150)}(n,this),!0)}.bind(this);for(let e of t.apply(this.options,s))if(!a(e))break;let h="li.dropdown-option[data-value]"+(this.get("hideHidden",1)?":not(.hidden)":"")+(this.get("hideDisabled")?":not(.disabled)":"")+(this.get("hideSelected")?":not(.selected)":""),o=i.create("DIV","dropdown-inner");o.addEventListener("scroll",e=>{let t=e.target.querySelectorAll("ul li.optgroup-sticky");for(let e=0;e<t.length;e++)t[e].offsetTop>this._spacing?t[e].classList.add("moving"):t[e].classList.contains("moving")&&t[e].classList.remove("moving")});for(let e=l.length-1;e>=0;e--)l[e].querySelectorAll(h).length>0&&o.appendChild(l[e]);if(""===o.innerText&&(n=this.render("empty",null,[t,s]))instanceof Element&&o.appendChild(n),this.trigger("event",(""===o.innerText?"no":"")+"results",[o,t,s]),""!==o.innerText&&this.get("multiple")&&this.get("multiSelectAll")){let e=i.create("SPAN","dropdown-action");for(let t in{"select-all":"","select-none":""}){let s=i.create("BUTTON",t);s.setAttribute("data-action","select-all"===t?"select":"unselect"),s.innerHTML=this._e("select-all"===t?"buttonAll":"buttonNone"),e.appendChild(s)}o.insertBefore(e,o.children[0])}let c=this._dropdown.querySelector(".dropdown-inner");return this._dropdown[(c?"replace":"append")+"Child"](this.trigger("filter","dropdown",[o])[0],c),this._select.classList.contains("active")&&this.calculate(),this._last_query=[t,s],this.trigger("hook","query:after",[t,s]),this.updateLabel().updateCSV()}render(e,t,s){let l="",n=this.trigger("filter","render",[{item:function(e,t){let s=i.create("LI",this._cls(e,"dropdown-option"));if(t[0]===this.options.finder&&this.get("searchMarked",1)){let i=new RegExp(`(${this.options.applyLinguisticRules(t[1][0])})`,"i");s.innerHTML=e.innerHTML.replace(i,"<mark>$1</mark>")}else s.innerHTML=e.innerHTML;return s.innerHTML=`<span class="option-title">${s.innerHTML}</span>`,this.get("descriptions",1)&&e.hasAttribute("data-description")&&(s.innerHTML+=`<span class="option-description">${e.getAttribute("data-description")}</span>`),s},group:function(e,t){let s=i.create("UL","dropdown-optgroup");if(!e&&!this.get("grouplessName"))return s;let l=e?e.label:"#",n=e?e.label:this.get("grouplessName");if(s.innerHTML=`<li class="optgroup-title${this.get("stickyGroups")?" optgroup-sticky":""}"><b>${n}</b></li>`,this.get("multiple")&&this.get("multiSelectGroup",1))for(let e in{"select-none":"","select-all":""}){let t=i.create("BUTTON",e);t.setAttribute("data-group",l),t.setAttribute("data-action","select-all"===e?"select":"unselect"),t.innerHTML=this._e("select-all"===e?"buttonAll":"buttonNone"),s.children[0].appendChild(t)}return s},empty:function(e,t){let s=i.create("SPAN","dropdown-empty");return s.innerHTML=this._e("empty"),s}}])[0];return this.trigger("filter",`render#${e}`,[n[e].apply(this,[t,s])])[0]}update(e,t=!0,i){if(0===e.length)return this;if([e,t]=this.trigger("filter","update",[e,t]),!0!==this.trigger("hook","update:before",[e,t,i]))return this;t&&(this.trigger("event","change",[e,i]),this.e.querySelectorAll("option:checked")>=this.get("multiLimit",1/0)&&this.trigger("event","limit",[e,i]));for(let t,i=0;i<e.length;i++){let s,l,n=`[data-value='${e[i][0].value.replace(/('|\\)/g,"\\$1")}'][data-group='${e[i][0].parentElement&&e[i][0].parentElement.label||"#"}']`;if(null!==(t=this._dropdown.querySelector(n))){let s=t.className.replace(/\b(selected|disabled|hidden)\b/gi,"").trim();t.className=this._cls(e[i][0],s.replace(/[ ]+/g," "))}}return this.updateCSV(),this.updateLabel(),this.trigger("hook","update:after",[e,t,i]),this}updateCSV(){return this.get("csvOutput")&&(this._csv.value=this.trigger("filter","update#csv",[this.value("csv")])[0]),this}updateLabel(e){let t=this.value("array"),i=this.get("multiLimit",1/0),s="",l={"[0]":t.length,"[1]":i===1/0?"&infin;":i,"[2]":i===1/0?this.options.count(null,!1,!1,!1):i-t.length};if(void 0===e){switch(!0){case this.get("disabled"):e="disabled";break;case 0===this.options.count():e="empty"+("finder"===this._last_query[0]?"Search":"");break;case this.get("multiple")&&i===1/0:e=0===t.length?"multiple":"multipleList";break;case this.get("multiple")&&i!==1/0:e=t.length===i?"multipleLimit":"multipleCount";break;case!this.get("multiple"):e=this.value("nodes")[0]&&this.value("nodes")[0].innerText||"single";break;default:e=this.get("multiple")?"multiple":"single"}["multiple","multipleCount","multipleList","single"].indexOf(e)>=0&&(e="string"==typeof this.get("placeholder")?this.get("placeholder"):e)}let n=this.get("multiple")?this.get("placeholderCount"):null;if(null!==n)switch(!0){case"count-up"===n:n="[0]";break;case"count-down"===n:n="[2]";break;case"limit"===n:n="[1]";break;case"both"===n:n="[0]/[1]";break;case"function"==typeof n:n=n.call(this,e,l);break;default:n=null}return"function"==typeof this.get("placeholder")&&([e,n,l]=this.get("placeholder").call(this,e,n,l)),[s,e,n,l]=this.trigger("filter","update#label",[s,e,n,l]),""===s&&(s=(n?`<span class="label-count">${this._e(n,l)}</span>`:"")+(e?`<span class="label-inner">${this._e(e,l)}</span>`:"")),s instanceof HTMLElement&&s.classList.contains("select-label")?(this._select.replaceChild(s,this._label),this._label=s):this._label.innerHTML=s.innerHTML?s.innerHTML:s,this}open(){return this._select.classList.contains("active")?this:(this.calculate(),this.trigger("event","open",[]),this._select.classList.add("active"),this.get("search")&&this.get("searchFocus",!0)&&this._search.querySelector("input").focus(),this)}close(){return this._select.classList.contains("active")?(this.trigger("event","close",[]),this._select.classList.remove("active"),this._dropdown.style.removeProperty("max-height"),this._dropdown.querySelector(".dropdown-inner").style.removeProperty("max-height"),this):this}toggle(){return this._select.classList.contains("active")?this.close():this.open()}reload(e=!0){return!0!==this.trigger("hook","reload:before",[e])?this:(e?this.query.apply(this,this._last_query):this.remove().init(),this.trigger("hook","reload:after",[e]),this)}remove(e){return!0!==this.trigger("hook","remove:before",[e])?this:(this.bind(null),this.get("csvOutput")&&!this.e.hasAttribute("data-name")&&this.e.setAttribute("name",this._csv.name),void 0!==e&&!0===e||([].map.call(this.e.querySelectorAll("optgroup[data-select='add']"),function(e){e.parentElement.removeChild(e)}),[].map.call(this.e.querySelectorAll("option[data-select='add']"),function(e){e.parentElement.removeChild(e)})),this.e.hasAttribute("data-tail-hidden")&&(this.e.style.removeProperty(this.e.getAttribute("data-tail-hidden")),this.e.removeAttribute("data-tail-hidden")),this._select.parentElement&&this._select.parentElement.removeChild(this._select),this.e.removeAttribute("data-tail-select"),this.trigger("hook","remove:after",[e]),this)}get(e,t){return e in this.con?this.con[e]:t}set(e,t){if("object"==typeof e){for(let t in e)this.set(t,e[t]);return this}return"disabled"===e?this[e?"disable":"enable"](!0):("multiple"===e&&(this.e.multiple=t),this.con[e]=t,this)}enable(e){return this.trigger("event","enable",[e]),this._select.classList.remove("disabled"),this.con.disabled=this.e.disabled=!1,!0===e?this.reload():this}disable(e){return this.trigger("event","disable",[e]),this._select.classList.add("disabled"),this.con.disabled=this.e.disabled=!0,!0===e?this.reload():this}on(e,t){e="string"==typeof e?[e]:e;for(let i=0;i<e.length;i++)e[i]in this.callbacks||(this.callbacks[e[i]]=[]),this.callbacks[e[i]].push(t);return this}value(e="auto"){var t=this.options.get(null,null,!0);switch("auto"===e?this.get("multiple")?"array":"csv":e){case"csv":return[].map.call(t,e=>e.value).join(this.get("csvSeparator",","));case"array":return[].map.call(t,e=>e.value);case"nodes":return t}return!1}}return r.version="0.6.0",r.status="beta",r.__=i,r.count=0,r.inst={},r.strings=s,r.options=n,r.plugins=l,{select:r,options:n}}(window,window.document);export{select,options};